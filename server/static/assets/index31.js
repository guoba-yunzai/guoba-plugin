var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value:value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b));import{j as createVNode,bQ as _defineProperty,s as inject,r as ref,F as Fragment,d0 as getSlot,fA as getClass,fB as getStyle,_ as _objectSpread2,c1 as PropTypes,d as defineComponent,bP as useConfigInject,av as onBeforeMount,fC as responsiveObserve,bS as _typeof,cj as onBeforeUnmount,J as provide,aK as toRef,A as computed,fD as responsiveArray,bW as flattenChildren,b$ as cloneElement,bO as warning,z as useDesign,M as useAttrs,D as unref,H as mergeProps,bz as getSlot$1,fE as CollapseContainer,bn as isVNode,al as isFunction,v as get,t as toRefs,aq as getCurrentInstance,bu as isProdMode,bj as withInstall}from"./index.js";function notEmpty(val){return null!=val}var Cell=function(props2){var _ref,itemPrefixCls=props2.itemPrefixCls,component=props2.component,span=props2.span,labelStyle=props2.labelStyle,contentStyle=props2.contentStyle,bordered=props2.bordered,label=props2.label,content=props2.content,colon=props2.colon,Component=component;return bordered?createVNode(Component,{class:[(_ref={},_defineProperty(_ref,"".concat(itemPrefixCls,"-item-label"),notEmpty(label)),_defineProperty(_ref,"".concat(itemPrefixCls,"-item-content"),notEmpty(content)),_ref)],colSpan:span},{default:function(){return[notEmpty(label)&&createVNode("span",{style:labelStyle},[label]),notEmpty(content)&&createVNode("span",{style:contentStyle},[content])]}}):createVNode(Component,{class:["".concat(itemPrefixCls,"-item")],colSpan:span},{default:function(){return[createVNode("div",{class:"".concat(itemPrefixCls,"-item-container")},[label&&createVNode("span",{class:["".concat(itemPrefixCls,"-item-label"),_defineProperty({},"".concat(itemPrefixCls,"-item-no-colon"),!colon)],style:labelStyle},[label]),content&&createVNode("span",{class:"".concat(itemPrefixCls,"-item-content"),style:contentStyle},[content])])]}})},Row=function(props2){var renderCells=function(items,_ref,_ref2){var colon=_ref.colon,prefixCls2=_ref.prefixCls,bordered2=_ref.bordered,component=_ref2.component,type=_ref2.type,showLabel=_ref2.showLabel,showContent=_ref2.showContent,rootLabelStyle=_ref2.labelStyle,rootContentStyle=_ref2.contentStyle;return items.map((function(item,index2){var _item$children,_item$children$label,itemProps=item.props||{},_itemProps$prefixCls=itemProps.prefixCls,itemPrefixCls=void 0===_itemProps$prefixCls?prefixCls2:_itemProps$prefixCls,_itemProps$span=itemProps.span,span=void 0===_itemProps$span?1:_itemProps$span,_itemProps$labelStyle=itemProps.labelStyle,labelStyle2=void 0===_itemProps$labelStyle?itemProps["label-style"]:_itemProps$labelStyle,_itemProps$contentSty=itemProps.contentStyle,contentStyle2=void 0===_itemProps$contentSty?itemProps["content-style"]:_itemProps$contentSty,_itemProps$label=itemProps.label,label=void 0===_itemProps$label?null===(_item$children=item.children)||void 0===_item$children||null===(_item$children$label=_item$children.label)||void 0===_item$children$label?void 0:_item$children$label.call(_item$children):_itemProps$label,children=getSlot(item),className=getClass(item),style=getStyle(item),key=item.key;return"string"==typeof component?createVNode(Cell,{key:"".concat(type,"-").concat(String(key)||index2),class:className,style:style,labelStyle:_objectSpread2(_objectSpread2({},rootLabelStyle),labelStyle2),contentStyle:_objectSpread2(_objectSpread2({},rootContentStyle),contentStyle2),span:span,colon:colon,component:component,itemPrefixCls:itemPrefixCls,bordered:bordered2,label:showLabel?label:null,content:showContent?children:null},null):[createVNode(Cell,{key:"label-".concat(String(key)||index2),class:className,style:_objectSpread2(_objectSpread2(_objectSpread2({},rootLabelStyle),style),labelStyle2),span:1,colon:colon,component:component[0],itemPrefixCls:itemPrefixCls,bordered:bordered2,label:label},null),createVNode(Cell,{key:"content-".concat(String(key)||index2),class:className,style:_objectSpread2(_objectSpread2(_objectSpread2({},rootContentStyle),style),contentStyle2),span:2*span-1,component:component[1],itemPrefixCls:itemPrefixCls,bordered:bordered2,content:children},null)]}))},prefixCls=props2.prefixCls,vertical=props2.vertical,row=props2.row,index=props2.index,bordered=props2.bordered,_inject=inject(descriptionsContext,{labelStyle:ref({}),contentStyle:ref({})}),labelStyle=_inject.labelStyle,contentStyle=_inject.contentStyle;return vertical?createVNode(Fragment,null,[createVNode("tr",{key:"label-".concat(index),class:"".concat(prefixCls,"-row")},[renderCells(row,props2,{component:"th",type:"label",showLabel:!0,labelStyle:labelStyle.value,contentStyle:contentStyle.value})]),createVNode("tr",{key:"content-".concat(index),class:"".concat(prefixCls,"-row")},[renderCells(row,props2,{component:"td",type:"content",showContent:!0,labelStyle:labelStyle.value,contentStyle:contentStyle.value})])]):createVNode("tr",{key:index,class:"".concat(prefixCls,"-row")},[renderCells(row,props2,{component:bordered?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0,labelStyle:labelStyle.value,contentStyle:contentStyle.value})])};PropTypes.any;var DescriptionsItem=defineComponent({compatConfig:{MODE:3},name:"ADescriptionsItem",props:{prefixCls:String,label:PropTypes.any,labelStyle:{type:Object,default:void 0},contentStyle:{type:Object,default:void 0},span:{type:Number,default:1}},slots:["label"],setup:function(_,_ref){var slots=_ref.slots;return function(){var _slots$default;return null===(_slots$default=slots.default)||void 0===_slots$default?void 0:_slots$default.call(slots)}}}),DEFAULT_COLUMN_MAP={xxxl:3,xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function getFilledItem(node,span,rowRestCol){var clone=node;return(void 0===span||span>rowRestCol)&&(clone=cloneElement(node,{span:rowRestCol}),warning(void 0===span,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),clone}var descriptionsContext=Symbol("descriptionsContext"),Descriptions=defineComponent({compatConfig:{MODE:3},name:"ADescriptions",props:{prefixCls:String,bordered:{type:Boolean,default:void 0},size:{type:String,default:"default"},title:PropTypes.any,extra:PropTypes.any,column:{type:[Number,Object],default:function(){return DEFAULT_COLUMN_MAP}},layout:String,colon:{type:Boolean,default:void 0},labelStyle:{type:Object,default:void 0},contentStyle:{type:Object,default:void 0}},slots:["title","extra"],Item:DescriptionsItem,setup:function(props2,_ref2){var token,slots=_ref2.slots,_useConfigInject=useConfigInject("descriptions",props2),prefixCls=_useConfigInject.prefixCls,direction=_useConfigInject.direction,screens=ref({});onBeforeMount((function(){token=responsiveObserve.subscribe((function(screen){"object"===_typeof(props2.column)&&(screens.value=screen)}))})),onBeforeUnmount((function(){responsiveObserve.unsubscribe(token)})),provide(descriptionsContext,{labelStyle:toRef(props2,"labelStyle"),contentStyle:toRef(props2,"contentStyle")});var mergeColumn=computed((function(){return function(column,screens){if("number"==typeof column)return column;if("object"===_typeof(column))for(var i=0;i<responsiveArray.length;i++){var breakpoint=responsiveArray[i];if(screens[breakpoint]&&void 0!==column[breakpoint])return column[breakpoint]||DEFAULT_COLUMN_MAP[breakpoint]}return 3}(props2.column,screens.value)}));return function(){var _slots$title,_slots$extra,_slots$default2,_ref3,size=props2.size,_props$bordered=props2.bordered,bordered=void 0!==_props$bordered&&_props$bordered,_props$layout=props2.layout,layout=void 0===_props$layout?"horizontal":_props$layout,_props$colon=props2.colon,colon=void 0===_props$colon||_props$colon,_props$title=props2.title,title=void 0===_props$title?null===(_slots$title=slots.title)||void 0===_slots$title?void 0:_slots$title.call(slots):_props$title,_props$extra=props2.extra,extra=void 0===_props$extra?null===(_slots$extra=slots.extra)||void 0===_slots$extra?void 0:_slots$extra.call(slots):_props$extra,rows=function(children,column){var childNodes=flattenChildren(children),rows=[],tmpRow=[],rowRestCol=column;return childNodes.forEach((function(node,index){var _node$props,span=null===(_node$props=node.props)||void 0===_node$props?void 0:_node$props.span,mergedSpan=span||1;if(index===childNodes.length-1)return tmpRow.push(getFilledItem(node,span,rowRestCol)),void rows.push(tmpRow);mergedSpan<rowRestCol?(rowRestCol-=mergedSpan,tmpRow.push(node)):(tmpRow.push(getFilledItem(node,mergedSpan,rowRestCol)),rows.push(tmpRow),rowRestCol=column,tmpRow=[])})),rows}(null===(_slots$default2=slots.default)||void 0===_slots$default2?void 0:_slots$default2.call(slots),mergeColumn.value);return createVNode("div",{class:[prefixCls.value,(_ref3={},_defineProperty(_ref3,"".concat(prefixCls.value,"-").concat(size),"default"!==size),_defineProperty(_ref3,"".concat(prefixCls.value,"-bordered"),!!bordered),_defineProperty(_ref3,"".concat(prefixCls.value,"-rtl"),"rtl"===direction.value),_ref3)]},[(title||extra)&&createVNode("div",{class:"".concat(prefixCls.value,"-header")},[title&&createVNode("div",{class:"".concat(prefixCls.value,"-title")},[title]),extra&&createVNode("div",{class:"".concat(prefixCls.value,"-extra")},[extra])]),createVNode("div",{class:"".concat(prefixCls.value,"-view")},[createVNode("table",null,[createVNode("tbody",null,[rows.map((function(row,index){return createVNode(Row,{key:index,index:index,colon:colon,prefixCls:prefixCls.value,vertical:"vertical"===layout,bordered:bordered,row:row},null)}))])])])])}}});Descriptions.install=function(app){return app.component(Descriptions.name,Descriptions),app.component(Descriptions.Item.name,Descriptions.Item),app};function useDescription(props2){if(!getCurrentInstance())throw new Error("useDescription() can only be used inside setup() or functional components!");const desc=ref(null),loaded=ref(!1);return[function(instance){unref(loaded)&&isProdMode()||(desc.value=instance,props2&&instance.setDescProps(props2),loaded.value=!0)},{setDescProps:descProps=>{var _a;null==(_a=unref(desc))||_a.setDescProps(descProps)}}]}const Description=withInstall(defineComponent({name:"Description",props:{useCollapse:{type:Boolean,default:!0},title:{type:String,default:""},size:{type:String,validator:v=>["small","default","middle",void 0].includes(v),default:"small"},bordered:{type:Boolean,default:!0},column:{type:[Number,Object],default:()=>({xxl:4,xl:3,lg:3,md:3,sm:2,xs:1})},collapseOptions:{type:Object,default:null},schema:{type:Array,default:()=>[]},data:{type:Object}},emits:["register"],setup(props2,{slots:slots,emit:emit}){const propsRef=ref(null),{prefixCls:prefixCls}=useDesign("description"),attrs=useAttrs(),getMergeProps=computed((()=>__spreadValues(__spreadValues({},props2),unref(propsRef)))),getProps=computed((()=>__spreadProps(__spreadValues({},unref(getMergeProps)),{title:void 0}))),useWrapper=computed((()=>!!unref(getMergeProps).title)),getCollapseOptions=computed((()=>__spreadValues({canExpand:!1},unref(getProps).collapseOptions))),getDescriptionsProps=computed((()=>__spreadValues(__spreadValues({},unref(attrs)),unref(getProps))));function renderLabel({label:label,labelMinWidth:labelMinWidth,labelStyle:labelStyle}){if(!labelStyle&&!labelMinWidth)return label;const labelStyles=__spreadProps(__spreadValues({},labelStyle),{minWidth:`${labelMinWidth}px `});return createVNode("div",{style:labelStyles},[label])}const renderDesc=()=>{let _slot;return createVNode(Descriptions,mergeProps({class:`${prefixCls}`},unref(getDescriptionsProps)),"function"==typeof(s=_slot=function(){const{schema:schema,data:data}=unref(getProps);return unref(schema).map((item=>{const{render:render,field:field,span:span,show:show,contentMinWidth:contentMinWidth}=item;if(show&&isFunction(show)&&!show(data))return null;const getContent=()=>{var _a;const _data=null==(_a=unref(getProps))?void 0:_a.data;if(!_data)return null;const getField=get(_data,field);return getField&&!toRefs(_data).hasOwnProperty(field)?isFunction(render)?render("",_data):"":isFunction(render)?render(getField,_data):null!=getField?getField:""},width=contentMinWidth;return createVNode(Descriptions.Item,{label:renderLabel(item),key:field,span:span},{default:()=>contentMinWidth?createVNode("div",{style:{minWidth:`${width}px`}},[getContent()]):getContent()})})).filter((item=>!!item))}())||"[object Object]"===Object.prototype.toString.call(s)&&!isVNode(s)?_slot:{default:()=>[_slot]});var s};return emit("register",{setDescProps:function(descProps){propsRef.value=__spreadValues(__spreadValues({},unref(propsRef)),descProps)}}),()=>unref(useWrapper)?(()=>{const content=props2.useCollapse?renderDesc():createVNode("div",null,[renderDesc()]);if(!props2.useCollapse)return content;const{canExpand:canExpand,helpMessage:helpMessage}=unref(getCollapseOptions),{title:title}=unref(getMergeProps);return createVNode(CollapseContainer,{title:title,canExpan:canExpand,helpMessage:helpMessage},{default:()=>content,action:()=>getSlot$1(slots,"action")})})():renderDesc()}}));export{Description as D,useDescription as u};
