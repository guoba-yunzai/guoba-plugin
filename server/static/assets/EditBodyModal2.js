import{a as e,b as l,r as a,f_ as t,w as s,z as d,I as i,e as o,o as c,f as n,k as u,j as r,v as m,l as p,O as v,i as f,da as h,s as g,V as D,M as x,F as y,d0 as b,d1 as k}from"./index.js";import{S as I}from"./index6.js";import w from"./SelectIconModal2.js";import"./IconUploader2.js";import"./esm.js";const _=e=>(b("data-v-2d38283f"),e=e(),k(),e),L=_((()=>m("span",{class:"tip"},"按住这里可拖动",-1))),j={class:"p-4"},C={class:"row"},B=_((()=>m("div",null,"分组",-1))),M={class:"flex-1"},U={class:"row"},z=_((()=>m("div",null,"仅主人",-1))),R={class:"flex justify-between align-center flex-wrap"},O={class:"flex justify-start"},V={class:"flex flex-1 justify-end"},$={key:0},S={class:"row"},A=_((()=>m("div",null,"标题",-1))),E={class:"flex-1"},F={class:"row"},N=_((()=>m("div",null,"描述",-1))),T={class:"flex-1"},q={class:"flex justify-between align-center"},G={class:"flex justify-start"},H={class:"flex flex-1 justify-end"};var J=e(l({__name:"EditBodyModal",props:{helpList:Object,modelData:Object,iconB64List:Array},setup(e){const l=e,b=a(!1),k=()=>{let e=l.modelData.groupIndex;l.helpList.splice(e,0,{group:"未命名组别",list:[]}),l.modelData.group=l.helpList[e],l.modelData.cellIndex=l.modelData.cell=null},_=()=>{var e;let a=null!=(e=l.modelData.cellIndex)?e:0;l.helpList[l.modelData.groupIndex].list.splice(a,0,{icon:1,title:"未命名项目",desc:"请添加描述"}),l.modelData.cell=l.helpList[l.modelData.groupIndex].list[a],l.modelData.cellIndex=a},J=e=>{let a,t=l.helpList,s=l.modelData.groupIndex;a=t[s],t[s]=t[s+e],t[s+e]=a,l.modelData.groupIndex+=e},K=e=>{let a,t=l.helpList[l.modelData.groupIndex].list,s=l.modelData.cellIndex;a=t[s],t[s]=t[s+e],t[s+e]=a,l.modelData.cellIndex+=e},P=()=>{l.helpList.splice(l.modelData.groupIndex,1),l.modelData.show=!1},Q=()=>{l.helpList[l.modelData.groupIndex].list.splice(l.modelData.cellIndex,1),l.modelData.show=!1},W=()=>{b.value=!0},X=a(null),{x:Y,y:Z,isDragging:ee}=t(X),le=a(0),ae=a(0),te=a(!1),se=a(0),de=a(0),ie=a(0),oe=a(0),ce=a({left:0,right:0,top:0,bottom:0});s([Y,Z],(()=>{if(!te.value){le.value=Y.value,ae.value=Z.value;const e=document.body.getBoundingClientRect(),l=X.value.getBoundingClientRect();ce.value.right=e.width-l.width,ce.value.bottom=e.height-l.height,ie.value=se.value,oe.value=de.value}te.value=!0})),s(ee,(()=>{ee||(te.value=!1)})),d((()=>{te.value&&(se.value=ie.value+Math.min(Math.max(ce.value.left,Y.value),ce.value.right)-le.value,de.value=oe.value+Math.min(Math.max(ce.value.top,Z.value),ce.value.bottom)-ae.value)}));const ne=i((()=>({transform:`translate(${se.value}px, ${de.value}px)`})));return(l,a)=>{const t=o("a-input"),s=o("Icon"),d=o("a-button"),i=o("a-popconfirm"),Y=o("a-divider");return c(),n(y,null,[u(g(x),{visible:e.modelData.show,"onUpdate:visible":a[8]||(a[8]=l=>e.modelData.show=l),closable:!1,footer:null,mask:!1},{title:r((()=>[m("div",{ref_key:"modalTitleRef",ref:X,style:{width:"100%",cursor:"move",margin:"0"}},[p(" 编辑内容 "),L],512)])),modalRender:r((({originVNode:e})=>[m("div",{style:v(ne.value)},[(c(),f(h(e)))],4)])),default:r((()=>[m("div",j,[m("div",C,[B,m("div",M,[u(t,{value:e.modelData.group.group,"onUpdate:value":a[0]||(a[0]=l=>e.modelData.group.group=l),placeholder:"分组"},null,8,["value"])])]),m("div",U,[z,u(g(I),{checked:e.modelData.group.auth,"onUpdate:checked":a[1]||(a[1]=l=>e.modelData.group.auth=l),checkedValue:"master","checked-children":"是","un-checked-children":"否"},null,8,["checked"])]),m("div",R,[m("div",O,[u(d,{class:"ml-4",disabled:0===e.modelData.groupIndex,type:"primary",shape:"circle",size:"medium",onClick:a[2]||(a[2]=e=>J(-1))},{default:r((()=>[u(s,{icon:"akar-icons:arrow-up"})])),_:1},8,["disabled"]),u(d,{class:"ml-4",disabled:e.modelData.groupIndex===e.helpList.length-1,type:"primary",shape:"circle",size:"medium",onClick:a[3]||(a[3]=e=>J(1))},{default:r((()=>[u(s,{icon:"akar-icons:arrow-down"})])),_:1},8,["disabled"])]),m("div",V,[e.modelData.cell?D("",!0):(c(),f(d,{key:0,class:"ml-4",onClick:_},{default:r((()=>[p("添加项目 ")])),_:1})),u(d,{class:"ml-4",type:"success",onClick:k},{default:r((()=>[p("添加分组")])),_:1}),u(i,{title:"确定删除？",onConfirm:P},{default:r((()=>[u(d,{class:"ml-4",type:"default",danger:""},{default:r((()=>[p("删除该组")])),_:1})])),_:1})])]),e.modelData.cell?(c(),n("div",$,[u(Y,{style:{margin:"16px 0"}}),m("div",{class:"icon",onClick:W,style:v(`background: url(${e.iconB64List[e.modelData.cell.icon]}) 0 0 no-repeat`)},null,4),m("div",S,[A,m("div",E,[u(t,{value:e.modelData.cell.title,"onUpdate:value":a[4]||(a[4]=l=>e.modelData.cell.title=l),placeholder:"标题"},null,8,["value"])])]),m("div",F,[N,m("div",T,[u(t,{value:e.modelData.cell.desc,"onUpdate:value":a[5]||(a[5]=l=>e.modelData.cell.desc=l),placeholder:"描述"},null,8,["value"])])]),m("div",q,[m("div",G,[u(d,{class:"ml-4",disabled:0===e.modelData.cellIndex,type:"primary",shape:"circle",size:"medium",onClick:a[6]||(a[6]=e=>K(-1))},{default:r((()=>[u(s,{icon:"akar-icons:arrow-left"})])),_:1},8,["disabled"]),u(d,{class:"ml-4",disabled:e.modelData.cellIndex===e.helpList[e.modelData.groupIndex].list.length-1,type:"primary",shape:"circle",size:"medium",onClick:a[7]||(a[7]=e=>K(1))},{default:r((()=>[u(s,{icon:"akar-icons:arrow-right"})])),_:1},8,["disabled"])]),m("div",H,[u(d,{class:"ml-4",type:"success",onClick:_},{default:r((()=>[p("添加项目")])),_:1}),u(i,{title:"确定删除？",onConfirm:Q},{default:r((()=>[u(d,{class:"ml-4",type:"default",danger:""},{default:r((()=>[p("删除该项")])),_:1})])),_:1})])])])):D("",!0)])])),_:1},8,["visible"]),e.modelData.cell?(c(),f(w,{key:0,visible:b.value,"onUpdate:visible":a[9]||(a[9]=e=>b.value=e),cell:e.modelData.cell,iconB64List:e.iconB64List},null,8,["visible","cell","iconB64List"])):D("",!0)],64)}}}),[["__scopeId","data-v-2d38283f"]]);export{J as default};
