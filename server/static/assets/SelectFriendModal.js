var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value:value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__spreadProps=(a,b)=>__defProps(a,__getOwnPropDescs(b));import{B as BasicTable}from"./TableImg.vue_vue_type_style_index_0_lang.js";import"./BasicForm.vue_vue_type_style_index_0_lang.js";import{d as defineComponent,g7 as FormItemRest,p as propTypes,M as useAttrs,r as ref,D as unref,x as defHttp,j as createVNode,c as resolveComponent,k as createTextVNode,b as _export_sfc,o as openBlock,h as createBlock,i as withCtx,H as mergeProps,E as createBaseVNode,B as createCommentVNode}from"./index.js";import{B as BasicModal,u as useModalInner}from"./index19.js";import{s as selectModalProps,u as useSelectModal}from"./useSelectModal.js";/* empty css       */import"./BasicForm.js";import"./upperFirst.js";import"./uniqBy.js";import"./index21.js";import"./index22.js";import"./useFormItem.js";import"./DeleteOutlined.js";import"./transButton.js";import"./download.js";import"./index23.js";import"./index24.js";import"./useWindowSizeFn.js";import"./FullscreenOutlined.js";import"./index30.js";import"./index32.js";import"./onMountedOrActivated.js";import"./useContentViewHeight.js";import"./ArrowLeftOutlined.js";import"./merge.js";import"./sortable.esm.js";import"./RedoOutlined.js";import"./scrollTo.js";import"./index33.js";function getFriendList(params){return defHttp.get({url:"/oicq/friend/list",params:params})}const _sfc_main=defineComponent({name:"UserSelectModal",components:{BasicModal:BasicModal,BasicTable:BasicTable,FormItemRest:FormItemRest},props:__spreadProps(__spreadValues({},selectModalProps),{modalTitle:propTypes.string.def("选择好友")}),emits:["register","getSelectResult"],setup(props,{emit:emit}){const attrs=useAttrs(),tableRef=ref(),getBindValue=Object.assign({},unref(props),unref(attrs),{canResize:!1,bordered:!0,size:"small"}),[{rowSelection:rowSelection,visibleChange:visibleChange,selectValues:selectValues,indexColumnProps:indexColumnProps,getSelectResult:getSelectResult,handleDeleteSelected:handleDeleteSelected,selectRows:selectRows}]=useSelectModal(getFriendList,getBindValue),tableScroll=ref({x:!1}),[register,{closeModal:closeModal}]=useModalInner((()=>{window.innerWidth<900?tableScroll.value={x:900}:tableScroll.value={x:!1},setTimeout((()=>{tableRef.value&&tableRef.value.setSelectedRowKeys(selectValues.value||[])}),800)})),columns=[{title:"头像",dataIndex:"user_id",width:60,customRender:({text:text})=>createVNode(resolveComponent("g-avatar"),{id:text,qs:100},null)},{title:"QQ号",dataIndex:"user_id",width:120},{title:"昵称",dataIndex:"nickname",ellipsis:!0,align:"left",customRender:({text:text,record:record})=>record.remark!==text?createVNode("span",null,[createVNode("span",null,[record.remark]),createVNode("span",{style:"color:#999;font-size:8px;"},[createTextVNode("（"),text,createTextVNode("）")])]):text},{title:"性别",dataIndex:"sex",width:60,customRender:({text:text})=>"female"===text?"女":"male"===text?"男":text}];return{handleOk:function(){getSelectResult(((options,values)=>{emit("getSelectResult",options,values),closeModal()}))},searchInfo:ref(props.params),register:register,indexColumnProps:indexColumnProps,visibleChange:visibleChange,getBindValue:getBindValue,getFriendList:getFriendList,formConfig:{baseColProps:{xs:24,sm:8,md:6,lg:8,xl:8,xxl:8},actionColOptions:{xs:24,sm:8,md:8,lg:8,xl:8,xxl:8,style:{paddingLeft:"8px",textAlign:"left"}},labelCol:{xs:24,sm:6},wrapperCol:{xs:24,sm:18},schemas:[{label:"QQ号",field:"query_qq",component:"Input",componentProps:{placeholder:"请输入QQ号"}},{label:"昵称",field:"query_name",component:"Input",componentProps:{placeholder:"请输入昵称"}}],autoSubmitOnEnter:!0},columns:columns,rowSelection:rowSelection,selectRows:selectRows,selectedTable:{rowKey:"user_id",size:"small",bordered:!0,scroll:{y:390},canResize:!1,pagination:!1,showIndexColumn:!1,columns:[columns[0],__spreadProps(__spreadValues({},columns[1]),{show:!1}),columns[2]]},handleDeleteSelected:handleDeleteSelected,tableScroll:tableScroll,tableRef:tableRef}}}),_hoisted_1=["onClick"];const SelectFriendModal=_export_sfc(_sfc_main,[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_BasicTable=resolveComponent("BasicTable"),_component_a_col=resolveComponent("a-col"),_component_Icon=resolveComponent("Icon"),_component_a_row=resolveComponent("a-row"),_component_BasicModal=resolveComponent("BasicModal"),_component_FormItemRest=resolveComponent("FormItemRest");return openBlock(),createBlock(_component_FormItemRest,null,{default:withCtx((()=>[createVNode(_component_BasicModal,mergeProps({width:"800px",title:_ctx.modalTitle,onOk:_ctx.handleOk,onRegister:_ctx.register,onVisibleChange:_ctx.visibleChange},_ctx.$attrs),{default:withCtx((()=>[createVNode(_component_a_row,null,{default:withCtx((()=>[createVNode(_component_a_col,{span:_ctx.showSelected?18:24},{default:withCtx((()=>[createVNode(_component_BasicTable,mergeProps({ref:"tableRef",columns:_ctx.columns,scroll:_ctx.tableScroll},_ctx.getBindValue,{useSearchForm:!0,formConfig:_ctx.formConfig,api:_ctx.getFriendList,searchInfo:_ctx.searchInfo,rowSelection:_ctx.rowSelection,indexColumnProps:_ctx.indexColumnProps}),null,16,["columns","scroll","formConfig","api","searchInfo","rowSelection","indexColumnProps"])])),_:1},8,["span"]),_ctx.showSelected?(openBlock(),createBlock(_component_a_col,{key:0,span:6},{default:withCtx((()=>[createVNode(_component_BasicTable,mergeProps(_ctx.selectedTable,{dataSource:_ctx.selectRows,useSearchForm:!0,formConfig:{showActionButtonGroup:!1,baseRowStyle:{minHeight:"40px"}}}),{action:withCtx((({record:record})=>[createBaseVNode("a",{onClick:$event=>_ctx.handleDeleteSelected(record)},[createVNode(_component_Icon,{icon:"ant-design:delete-outlined"})],8,_hoisted_1)])),_:1},16,["dataSource"])])),_:1})):createCommentVNode("",!0)])),_:1})])),_:1},16,["title","onOk","onRegister","onVisibleChange"])])),_:1})}]]);export{SelectFriendModal as default};
