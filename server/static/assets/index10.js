import{_ as e,ag as t,b as n,c as a,r as o,J as l,q as r,w as i,K as c,I as s,fj as u,ak as d,am as f,af as v,k as p,at as h,aB as y,bE as m,aA as g,fk as b,aR as w,aS as C,ad as k,aG as S,aH as x,ac as O,aT as N,R as M}from"./index.js";var T=function(){return{prefixCls:String,width:t.oneOfType([t.string,t.number]),height:t.oneOfType([t.string,t.number]),style:{type:Object,default:void 0},class:String,placement:{type:String},wrapperClassName:String,level:{type:[String,Array]},levelMove:{type:[Number,Function,Array]},duration:String,ease:String,showMask:{type:Boolean,default:void 0},maskClosable:{type:Boolean,default:void 0},maskStyle:{type:Object,default:void 0},afterVisibleChange:Function,keyboard:{type:Boolean,default:void 0},contentWrapperStyle:{type:Object,default:void 0},autofocus:{type:Boolean,default:void 0},open:{type:Boolean,default:void 0}}};var E={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend"},A=E[Object.keys(E).filter((function(e){if("undefined"==typeof document)return!1;var t=document.getElementsByTagName("html")[0];return e in(t?t.style:{})}))[0]];function B(e,t,n,a){e.addEventListener?e.addEventListener(t,n,a):e.attachEvent&&e.attachEvent("on".concat(t),n)}function V(e,t,n,a){e.removeEventListener?e.removeEventListener(t,n,a):e.attachEvent&&e.detachEvent("on".concat(t),n)}var j=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},L=!("undefined"!=typeof window&&window.document&&window.document.createElement),F=function e(t,n,a,o){if(!n||n===document||n instanceof Document)return!1;if(n===t.parentNode)return!0;var l=Math.max(Math.abs(a),Math.abs(o))===Math.abs(o),r=Math.max(Math.abs(a),Math.abs(o))===Math.abs(a),i=n.scrollHeight-n.clientHeight,c=n.scrollWidth-n.clientWidth,s=document.defaultView.getComputedStyle(n),u="auto"===s.overflowY||"scroll"===s.overflowY,d="auto"===s.overflowX||"scroll"===s.overflowX,f=i&&u,v=c&&d;return!!(l&&(!f||f&&(n.scrollTop>=i&&o<0||n.scrollTop<=0&&o>0))||r&&(!v||v&&(n.scrollLeft>=c&&a<0||n.scrollLeft<=0&&a>0)))&&e(t,n.parentNode,a,o)},D=["width","height","open","prefixCls","placement","level","levelMove","ease","duration","getContainer","onChange","afterVisibleChange","showMask","maskClosable","maskStyle","keyboard","getOpenCount","scrollLocker","contentWrapperStyle","style","class"],I={},P=n({compatConfig:{MODE:3},inheritAttrs:!1,props:e(e({},T()),{},{getContainer:Function,getOpenCount:Function,scrollLocker:t.any,switchScrollingEffect:Function}),emits:["close","handleClick","change"],setup:function(t,n){var g,b=n.emit,w=n.slots,C=a({startPos:{x:null,y:null}}),k=o(),S=o(),x=o(),O=o(),N=o(),M=[],T="drawer_id_".concat(Number((Date.now()+Math.random()).toString().replace(".",Math.round(9*Math.random()).toString())).toString(16)),E=!(L||!m)&&{passive:!1};l((function(){r((function(){var e,n=t.open,a=t.getContainer,o=t.showMask,l=t.autofocus,i=null==a?void 0:a();(Q(t),n)&&(i&&i.parentNode===document.body&&(I[T]=n),_(),r((function(){l&&P()})),o&&(null===(e=t.scrollLocker)||void 0===e||e.lock()))}))})),i((function(){return t.level}),(function(){Q(t)}),{flush:"post"}),i((function(){return t.open}),(function(){var e=t.open,n=t.getContainer,a=t.scrollLocker,o=t.showMask,l=t.autofocus,r=null==n?void 0:n();r&&r.parentNode===document.body&&(I[T]=!!e),_(),e?(l&&P(),o&&(null==a||a.lock())):null==a||a.unLock()}),{flush:"post"}),c((function(){var e,n=t.open;delete I[T],n&&(q(!1),document.body.style.touchAction=""),null===(e=t.scrollLocker)||void 0===e||e.unLock()})),i((function(){return t.placement}),(function(e){e&&(N.value=null)}));var P=function(){var e,t;null===(e=S.value)||void 0===e||null===(t=e.focus)||void 0===t||t.call(e)},z=function(e){e.touches.length>1||(C.startPos={x:e.touches[0].clientX,y:e.touches[0].clientY})},H=function(e){if(!(e.changedTouches.length>1)){var t=e.currentTarget,n=e.changedTouches[0].clientX-C.startPos.x,a=e.changedTouches[0].clientY-C.startPos.y;(t===x.value||t===O.value||t===N.value&&F(t,e.target,n,a))&&e.cancelable&&e.preventDefault()}},R=function e(t){var n=t.target;V(n,A,e),n.style.transition=""},W=function(e){b("close",e)},X=function(e){e.keyCode===y.ESC&&(e.stopPropagation(),W(e))},Y=function(e){var n=t.open,a=t.afterVisibleChange;e.target===k.value&&e.propertyName.match(/transform$/)&&(S.value.style.transition="",!n&&$()&&(document.body.style.overflowX="",x.value&&(x.value.style.left="",x.value.style.width="")),a&&a(!!n))},K=s((function(){var e=t.placement,n="left"===e||"right"===e;return{isHorizontal:n,placementName:"translate".concat(n?"X":"Y")}})),_=function(){var e=t.open,n=t.width,a=t.height,o=K.value,l=o.isHorizontal,r=o.placementName,i=N.value?N.value.getBoundingClientRect()[l?"width":"height"]:0;U(e,r,(l?n:a)||i)},q=function(e,n,a,o){var l=t.placement,r=t.levelMove,i=t.duration,c=t.ease,s=t.showMask;M.forEach((function(t){t.style.transition="transform ".concat(i," ").concat(c),B(t,A,R);var u,d,f,v=e?a:0;if(r){var p=(d={target:t,open:e},f="function"==typeof(u=r)?u(d):u,Array.isArray(f)?2===f.length?f:[f[0],f[1]]:[f]);v=e?p[0]:p[1]||0}var h="number"==typeof v?"".concat(v,"px"):v,y="left"===l||"top"===l?h:"-".concat(h);y=s&&"right"===l&&o?"calc(".concat(y," + ").concat(o,"px)"):y,t.style.transform=v?"".concat(n,"(").concat(y,")"):""}))},U=function(e,t,n){if(!L){var a=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth?u(!0):0;q(e,t,n,a),Z(a)}b("change",e)},Z=function(e){var n=t.getContainer,a=t.showMask,o=t.open,l=null==n?void 0:n();if(l&&l.parentNode===document.body&&a){var r=["touchstart"],i=[document.body,x.value,O.value,N.value];o&&"hidden"!==document.body.style.overflow?(e&&G(e),document.body.style.touchAction="none",i.forEach((function(e,t){e&&B(e,r[t]||"touchmove",t?H:z,E)}))):$()&&(document.body.style.touchAction="",e&&J(e),i.forEach((function(e,t){e&&V(e,r[t]||"touchmove",t?H:z,E)})))}},G=function(e){var n=t.placement,a=t.duration,o=t.ease,l="width ".concat(a," ").concat(o),r="transform ".concat(a," ").concat(o);switch(S.value.style.transition="none",n){case"right":S.value.style.transform="translateX(-".concat(e,"px)");break;case"top":case"bottom":S.value.style.width="calc(100% - ".concat(e,"px)"),S.value.style.transform="translateZ(0)"}clearTimeout(g),g=setTimeout((function(){S.value&&(S.value.style.transition="".concat(r,",").concat(l),S.value.style.width="",S.value.style.transform="")}))},J=function(e){var n,a=t.placement,o=t.duration,l=t.ease;S.value.style.transition="none";var r="width ".concat(o," ").concat(l),i="transform ".concat(o," ").concat(l);switch(a){case"left":S.value.style.width="100%",r="width 0s ".concat(l," ").concat(o);break;case"right":S.value.style.transform="translateX(".concat(e,"px)"),S.value.style.width="100%",r="width 0s ".concat(l," ").concat(o),x.value&&(x.value.style.left="-".concat(e,"px"),x.value.style.width="calc(100% + ".concat(e,"px)"));break;case"top":case"bottom":S.value.style.width="calc(100% + ".concat(e,"px)"),S.value.style.height="100%",S.value.style.transform="translateZ(0)",n="height 0s ".concat(l," ").concat(o)}clearTimeout(g),g=setTimeout((function(){S.value&&(S.value.style.transition="".concat(i,",").concat(n?"".concat(n,","):"").concat(r),S.value.style.transform="",S.value.style.width="",S.value.style.height="")}))},$=function(){return!Object.keys(I).some((function(e){return I[e]}))},Q=function(e){var t=e.level,n=e.getContainer;if(!L){var a,o=null==n?void 0:n(),l=o?o.parentNode:null;if(M=[],"all"===t)(l?Array.prototype.slice.call(l.children):[]).forEach((function(e){"SCRIPT"!==e.nodeName&&"STYLE"!==e.nodeName&&"LINK"!==e.nodeName&&e!==o&&M.push(e)}));else t&&(a=t,Array.isArray(a)?a:[a]).forEach((function(e){document.querySelectorAll(e).forEach((function(e){M.push(e)}))}))}},ee=function(e){b("handleClick",e)},te=o(!1);return i(S,(function(){r((function(){te.value=!0}))})),function(){var n,a,o,l=t.width,r=t.height,i=t.open,c=t.prefixCls,s=t.placement;t.level,t.levelMove,t.ease,t.duration,t.getContainer,t.onChange,t.afterVisibleChange;var u=t.showMask,y=t.maskClosable,m=t.maskStyle,g=t.keyboard;t.getOpenCount,t.scrollLocker;var b=t.contentWrapperStyle,C=t.style,M=t.class,T=d(t,D),E=i&&te.value,A=f(c,(v(n={},"".concat(c,"-").concat(s),!0),v(n,"".concat(c,"-open"),E),v(n,M,!!M),v(n,"no-mask",!u),n)),B=K.value.placementName,V="left"===s||"top"===s?"-100%":"100%",L=E?"":"".concat(B,"(").concat(V,")");return p("div",e(e({},h(T,["switchScrollingEffect","autofocus"])),{},{tabindex:-1,class:A,style:C,ref:S,onKeydown:E&&g?X:void 0,onTransitionend:Y}),[u&&p("div",{class:"".concat(c,"-mask"),onClick:y?W:void 0,style:m,ref:x},null),p("div",{class:"".concat(c,"-content-wrapper"),style:e({transform:L,msTransform:L,width:j(l)?"".concat(l,"px"):l,height:j(r)?"".concat(r,"px"):r},b),ref:k},[p("div",{class:"".concat(c,"-content"),ref:N},[null===(a=w.default)||void 0===a?void 0:a.call(w)]),w.handler?p("div",{onClick:ee,ref:O},[null===(o=w.handler)||void 0===o?void 0:o.call(w)]):null])])}}}),z=["afterVisibleChange","getContainer","wrapperClassName","forceRender"],H=["visible","afterClose"],R=n({compatConfig:{MODE:3},inheritAttrs:!1,props:g(e(e({},T()),{},{forceRender:{type:Boolean,default:void 0},getContainer:t.oneOfType([t.string,t.func,t.object,t.looseBool])}),{prefixCls:"drawer",placement:"left",getContainer:"body",level:"all",duration:".3s",ease:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",afterVisibleChange:function(){},showMask:!0,maskClosable:!0,maskStyle:{},wrapperClassName:"",keyboard:!0,forceRender:!1,autofocus:!0}),emits:["handleClick","close"],slots:["handler"],setup:function(t,n){var a=n.emit,l=n.slots,r=o(null),i=function(e){a("handleClick",e)},c=function(e){a("close",e)};return function(){t.afterVisibleChange;var n=t.getContainer,a=t.wrapperClassName,o=t.forceRender,s=d(t,z),u=null;if(!n)return p("div",{class:a,ref:r},[p(P,e(e({},s),{},{open:t.open,getContainer:function(){return r.value},onClose:c,onHandleClick:i}),l)]);var f=!!l.handler||o;return(f||t.open||r.value)&&(u=p(b,{visible:t.open,forceRender:f,getContainer:n,wrapperClassName:a},{default:function(n){var a=n.visible,o=n.afterClose,u=d(n,H);return p(P,e(e(e({ref:r},s),u),{},{open:void 0!==a?a:t.open,afterVisibleChange:void 0!==o?o:t.afterVisibleChange,onClose:c,onHandleClick:i}),l)}})),u}}}),W=["width","height","visible","placement","mask","wrapClassName","class"],X=C("top","right","bottom","left");C("default","large");var Y={distance:180},K=w(n({compatConfig:{MODE:3},name:"ADrawer",inheritAttrs:!1,props:g({autofocus:{type:Boolean,default:void 0},closable:{type:Boolean,default:void 0},closeIcon:t.any,destroyOnClose:{type:Boolean,default:void 0},forceRender:{type:Boolean,default:void 0},getContainer:t.any,maskClosable:{type:Boolean,default:void 0},mask:{type:Boolean,default:void 0},maskStyle:{type:Object,default:void 0},wrapStyle:{type:Object,default:void 0},style:{type:Object,default:void 0},class:t.any,wrapClassName:String,size:{type:String},drawerStyle:{type:Object,default:void 0},headerStyle:{type:Object,default:void 0},bodyStyle:{type:Object,default:void 0},contentWrapperStyle:{type:Object,default:void 0},title:t.any,visible:{type:Boolean,default:void 0},width:t.oneOfType([t.string,t.number]),height:t.oneOfType([t.string,t.number]),zIndex:Number,prefixCls:String,push:t.oneOfType([t.looseBool,{type:Object}]),placement:t.oneOf(X),keyboard:{type:Boolean,default:void 0},extra:t.any,footer:t.any,footerStyle:{type:Object,default:void 0},level:t.any,levelMove:{type:[Number,Array,Function]},handle:t.any,afterVisibleChange:Function,onAfterVisibleChange:Function,"onUpdate:visible":Function,onClose:Function},{closable:!0,placement:"right",maskClosable:!0,mask:!0,level:null,keyboard:!0,push:Y}),slots:["closeIcon","title","extra","footer","handle"],setup:function(t,n){var a=n.emit,u=n.slots,y=n.attrs,m=o(!1),g=o(!1),b=o(null),w=k("parentDrawerOpts",null),C=S("drawer",t).prefixCls;x(!t.afterVisibleChange,"Drawer","`afterVisibleChange` prop is deprecated, please use `@afterVisibleChange` event instead"),x(void 0===t.wrapStyle,"Drawer","`wrapStyle` prop is deprecated, please use `style` instead"),x(void 0===t.wrapClassName,"Drawer","`wrapClassName` prop is deprecated, please use `class` instead");O("parentDrawerOpts",{setPush:function(){m.value=!0},setPull:function(){m.value=!1,r((function(){T()}))}}),l((function(){t.visible&&w&&w.setPush()})),c((function(){w&&w.setPull()})),i((function(){return t.visible}),(function(e){w&&(e?w.setPush():w.setPull())}),{flush:"post"});var T=function(){var e,t;null===(e=b.value)||void 0===e||null===(t=e.domFocus)||void 0===t||t.call(e)},E=function(e){a("update:visible",!1),a("close",e)},A=function(e){var n;null===(n=t.afterVisibleChange)||void 0===n||n.call(t,e),a("afterVisibleChange",e)},B=s((function(){return t.destroyOnClose&&!t.visible})),V=function(){B.value&&(t.visible||(g.value=!0))},j=s((function(){var e,n=t.push,a=t.placement;return e="boolean"==typeof n?n?Y.distance:0:n.distance,e=parseFloat(String(e||0)),"left"===a||"right"===a?"translateX(".concat("left"===a?e:-e,"px)"):"top"===a||"bottom"===a?"translateY(".concat("top"===a?e:-e,"px)"):null})),L=s((function(){var e=t.visible,n=t.mask,a=t.placement,o=t.size,l=void 0===o?"default":o,r=t.width,i=t.height;if(!e&&!n)return{};var c={};if("left"===a||"right"===a){var s="large"===l?736:378;c.width=void 0===r?s:r,c.width="string"==typeof c.width?c.width:"".concat(c.width,"px")}else{var u="large"===l?736:378;c.height=void 0===i?u:i,c.height="string"==typeof c.height?c.height:"".concat(c.height,"px")}return c})),F=s((function(){var n=t.zIndex,a=t.wrapStyle,o=t.mask,l=t.style,r=o?{}:L.value;return e(e(e({zIndex:n,transform:m.value?j.value:void 0},r),a),l)})),D=function(e){var n=t.closable,a=t.headerStyle,o=N(u,t,"extra"),l=N(u,t,"title");return l||n?p("div",{class:f("".concat(e,"-header"),v({},"".concat(e,"-header-close-only"),n&&!l&&!o)),style:a},[p("div",{class:"".concat(e,"-header-title")},[I(e),l&&p("div",{class:"".concat(e,"-title")},[l])]),o&&p("div",{class:"".concat(e,"-extra")},[o])]):null},I=function(e){var n,a=t.closable,o=u.closeIcon?null===(n=u.closeIcon)||void 0===n?void 0:n.call(u):t.closeIcon;return a&&p("button",{key:"closer",onClick:E,"aria-label":"Close",class:"".concat(e,"-close")},[void 0===o?p(M,null,null):o])},P=function(e){var n=N(u,t,"footer");if(!n)return null;var a="".concat(e,"-footer");return p("div",{class:a,style:t.footerStyle},[n])};return function(){var n;t.width,t.height;var a=t.visible,o=t.placement,l=t.mask,r=t.wrapClassName,i=t.class,c=d(t,W),s=l?L.value:{},m=l?"":"no-mask",w=e(e(e(e({},y),h(c,["size","closeIcon","closable","destroyOnClose","drawerStyle","headerStyle","bodyStyle","title","push","wrapStyle","onAfterVisibleChange","onClose","onUpdate:visible"])),s),{},{onClose:E,afterVisibleChange:A,handler:!1,prefixCls:C.value,open:a,showMask:l,placement:o,class:f((n={},v(n,i,i),v(n,r,!!r),v(n,m,!!m),n)),style:F.value,ref:b});return p(R,w,{handler:t.handle?function(){return t.handle}:u.handle,default:function(){return function(n){var a;if(g.value&&!t.visible)return null;g.value=!1;var o=t.bodyStyle,l=t.drawerStyle,r={};return B.value&&(r.opacity=0,r.transition="opacity .3s"),p("div",{class:"".concat(n,"-wrapper-body"),style:e(e({},r),l),onTransitionend:V},[D(n),p("div",{key:"body",class:"".concat(n,"-body"),style:o},[null===(a=u.default)||void 0===a?void 0:a.call(u)]),P(n)])}(C.value)}})}}}));export{K as D};
