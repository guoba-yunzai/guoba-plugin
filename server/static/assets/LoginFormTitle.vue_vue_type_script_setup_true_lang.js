var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value:value}):obj[key]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__async=(__this,__arguments,generator)=>new Promise(((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())}));import{r as ref,A as computed,aa as useI18n,D as unref,d as defineComponent,o as openBlock,e as createElementBlock,m as toDisplayString}from"./index.js";var LoginStateEnum=(LoginStateEnum2=>(LoginStateEnum2[LoginStateEnum2.LOGIN=0]="LOGIN",LoginStateEnum2[LoginStateEnum2.REGISTER=1]="REGISTER",LoginStateEnum2[LoginStateEnum2.RESET_PASSWORD=2]="RESET_PASSWORD",LoginStateEnum2[LoginStateEnum2.MOBILE=3]="MOBILE",LoginStateEnum2[LoginStateEnum2.QR_CODE=4]="QR_CODE",LoginStateEnum2))(LoginStateEnum||{});const currentState=ref(0);function useLoginState(){function setLoginState(state){currentState.value=state}return{setLoginState:setLoginState,getLoginState:computed((()=>currentState.value)),handleBackLogin:function(){setLoginState(0)}}}function useFormValid(formRef){return{validForm:function(){return __async(this,null,(function*(){const form=unref(formRef);if(!form)return;return yield form.validate()}))}}}function useFormRules(formData){const{t:t}=useI18n(),getAccountFormRule=computed((()=>createRule(t("sys.login.accountPlaceholder")))),getPasswordFormRule=computed((()=>createRule(t("sys.login.passwordPlaceholder")))),getSmsFormRule=computed((()=>createRule(t("sys.login.smsPlaceholder")))),getMobileFormRule=computed((()=>createRule(t("sys.login.mobilePlaceholder")))),validatePolicy=(_,value)=>__async(this,null,(function*(){return value?Promise.resolve():Promise.reject(t("sys.login.policyPlaceholder"))})),validateConfirmPassword=password=>(_,value)=>__async(this,null,(function*(){return value?value!==password?Promise.reject(t("sys.login.diffPwd")):Promise.resolve():Promise.reject(t("sys.login.passwordPlaceholder"))}));return{getFormRules:computed((()=>{const accountFormRule=unref(getAccountFormRule),passwordFormRule=unref(getPasswordFormRule),mobileRule={sms:unref(getSmsFormRule),mobile:unref(getMobileFormRule)};switch(unref(currentState)){case 1:return __spreadValues({account:accountFormRule,password:passwordFormRule,confirmPassword:[{validator:validateConfirmPassword(null==formData?void 0:formData.password),trigger:"change"}],policy:[{validator:validatePolicy,trigger:"change"}]},mobileRule);case 2:return __spreadValues({account:accountFormRule},mobileRule);case 3:return mobileRule;default:return{account:accountFormRule,password:passwordFormRule}}}))}}function createRule(message){return[{required:!0,message:message,trigger:"change"}]}const _hoisted_1={class:"mb-3 text-2xl font-bold text-center xl:text-3xl enter-x xl:text-left"},_sfc_main=defineComponent({__name:"LoginFormTitle",setup(__props){const{t:t}=useI18n(),{getLoginState:getLoginState}=useLoginState(),getFormTitle=computed((()=>({[LoginStateEnum.RESET_PASSWORD]:t("sys.login.forgetFormTitle"),[LoginStateEnum.LOGIN]:t("sys.login.signInFormTitle"),[LoginStateEnum.REGISTER]:t("sys.login.signUpFormTitle"),[LoginStateEnum.MOBILE]:t("sys.login.mobileSignInFormTitle"),[LoginStateEnum.QR_CODE]:t("sys.login.qrSignInFormTitle")}[unref(getLoginState)])));return(_ctx,_cache)=>(openBlock(),createElementBlock("h2",_hoisted_1,toDisplayString(getFormTitle.value),1))}});export{LoginStateEnum as L,_sfc_main as _,useFormRules as a,useFormValid as b,useLoginState as u};
