import{j as createVNode,I as Icon,dw as _createClass,dx as _classCallCheck,bQ as _defineProperty$1,d as defineComponent,r as ref,cj as onBeforeUnmount,dy as isMobile,b_ as classNames,_ as _objectSpread2,cw as warning,ch as wrapperRaf,bS as _typeof,A as computed,cm as _slicedToArray,w as watch,ct as _objectWithoutProperties,cg as KeyCode,bN as _extends,cH as useInjectFormItemContext,bP as useConfigInject,db as DownOutlined,bT as omit,b$ as cloneElement,c1 as PropTypes}from"./index.js";var UpOutlined$1={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"};function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?Object(arguments[i]):{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter((function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable})))),ownKeys.forEach((function(key){_defineProperty(target,key,source[key])}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var UpOutlined=function(props,context){var p=_objectSpread({},props,context.attrs);return createVNode(Icon,_objectSpread({},p,{icon:UpOutlined$1}),null)};function supportBigInt(){return"function"==typeof BigInt}function trimNumber(numStr){var str=numStr.trim(),negative=str.startsWith("-");negative&&(str=str.slice(1)),(str=str.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,"")).startsWith(".")&&(str="0".concat(str));var trimStr=str||"0",splitNumber=trimStr.split("."),integerStr=splitNumber[0]||"0",decimalStr=splitNumber[1]||"0";"0"===integerStr&&"0"===decimalStr&&(negative=!1);var negativeStr=negative?"-":"";return{negative:negative,negativeStr:negativeStr,trimStr:trimStr,integerStr:integerStr,decimalStr:decimalStr,fullStr:"".concat(negativeStr).concat(trimStr)}}function isE(number){var str=String(number);return!Number.isNaN(Number(str))&&str.includes("e")}function getNumberPrecision(number){var numStr=String(number);if(isE(number)){var precision=Number(numStr.slice(numStr.indexOf("e-")+2)),decimalMatch=numStr.match(/\.(\d+)/);return null!=decimalMatch&&decimalMatch[1]&&(precision+=decimalMatch[1].length),precision}return numStr.includes(".")&&validateNumber(numStr)?numStr.length-numStr.indexOf(".")-1:0}function num2str(number){var numStr=String(number);if(isE(number)){if(number>Number.MAX_SAFE_INTEGER)return String(supportBigInt()?BigInt(number).toString():Number.MAX_SAFE_INTEGER);if(number<Number.MIN_SAFE_INTEGER)return String(supportBigInt()?BigInt(number).toString():Number.MIN_SAFE_INTEGER);numStr=number.toFixed(getNumberPrecision(numStr))}return trimNumber(numStr).fullStr}function validateNumber(num){return"number"==typeof num?!Number.isNaN(num):!!num&&(/^\s*-?\d+(\.\d+)?\s*$/.test(num)||/^\s*-?\d+\.\s*$/.test(num)||/^\s*-?\.\d+\s*$/.test(num))}function isEmpty(value){return!value&&0!==value&&!Number.isNaN(value)||!String(value).trim()}UpOutlined.displayName="UpOutlined",UpOutlined.inheritAttrs=!1;var NumberDecimal=function(){function NumberDecimal2(value){_classCallCheck(this,NumberDecimal2),_defineProperty$1(this,"origin",""),isEmpty(value)?this.empty=!0:(this.origin=String(value),this.number=Number(value))}return _createClass(NumberDecimal2,[{key:"negate",value:function(){return new NumberDecimal2(-this.toNumber())}},{key:"add",value:function(value){if(this.isInvalidate())return new NumberDecimal2(value);var target=Number(value);if(Number.isNaN(target))return this;var number=this.number+target;if(number>Number.MAX_SAFE_INTEGER)return new NumberDecimal2(Number.MAX_SAFE_INTEGER);if(number<Number.MIN_SAFE_INTEGER)return new NumberDecimal2(Number.MIN_SAFE_INTEGER);var maxPrecision=Math.max(getNumberPrecision(this.number),getNumberPrecision(target));return new NumberDecimal2(number.toFixed(maxPrecision))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(target){return this.toNumber()===(null==target?void 0:target.toNumber())}},{key:"lessEquals",value:function(target){return this.add(target.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isInvalidate()?"":num2str(this.number):this.origin}}]),NumberDecimal2}(),BigIntDecimal=function(){function BigIntDecimal2(value){if(_classCallCheck(this,BigIntDecimal2),_defineProperty$1(this,"origin",""),isEmpty(value))this.empty=!0;else if(this.origin=String(value),"-"===value||Number.isNaN(value))this.nan=!0;else{var mergedValue=value;if(isE(mergedValue)&&(mergedValue=Number(mergedValue)),validateNumber(mergedValue="string"==typeof mergedValue?mergedValue:num2str(mergedValue))){var trimRet=trimNumber(mergedValue);this.negative=trimRet.negative;var numbers=trimRet.trimStr.split(".");this.integer=BigInt(numbers[0]);var decimalStr=numbers[1]||"0";this.decimal=BigInt(decimalStr),this.decimalLen=decimalStr.length}else this.nan=!0}}return _createClass(BigIntDecimal2,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(decimalLength){var str="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(decimalLength,"0"));return BigInt(str)}},{key:"negate",value:function(){var clone=new BigIntDecimal2(this.toString());return clone.negative=!clone.negative,clone}},{key:"add",value:function(value){if(this.isInvalidate())return new BigIntDecimal2(value);var offset=new BigIntDecimal2(value);if(offset.isInvalidate())return this;var maxDecimalLength=Math.max(this.getDecimalStr().length,offset.getDecimalStr().length),_trimNumber=trimNumber((this.alignDecimal(maxDecimalLength)+offset.alignDecimal(maxDecimalLength)).toString()),negativeStr=_trimNumber.negativeStr,trimStr=_trimNumber.trimStr,hydrateValueStr="".concat(negativeStr).concat(trimStr.padStart(maxDecimalLength+1,"0"));return new BigIntDecimal2("".concat(hydrateValueStr.slice(0,-maxDecimalLength),".").concat(hydrateValueStr.slice(-maxDecimalLength)))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(target){return this.toString()===(null==target?void 0:target.toString())}},{key:"lessEquals",value:function(target){return this.add(target.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?this.isInvalidate()?"":trimNumber("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),BigIntDecimal2}();function getMiniDecimal(value){return supportBigInt()?new BigIntDecimal(value):new NumberDecimal(value)}function toFixed(numStr,separatorStr,precision){var cutOnly=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(""===numStr)return"";var _trimNumber2=trimNumber(numStr),negativeStr=_trimNumber2.negativeStr,integerStr=_trimNumber2.integerStr,decimalStr=_trimNumber2.decimalStr,precisionDecimalStr="".concat(separatorStr).concat(decimalStr),numberWithoutDecimal="".concat(negativeStr).concat(integerStr);if(precision>=0){var advancedNum=Number(decimalStr[precision]);return advancedNum>=5&&!cutOnly?toFixed(getMiniDecimal(numStr).add("".concat(negativeStr,"0.").concat("0".repeat(precision)).concat(10-advancedNum)).toString(),separatorStr,precision,cutOnly):0===precision?numberWithoutDecimal:"".concat(numberWithoutDecimal).concat(separatorStr).concat(decimalStr.padEnd(precision,"0").slice(0,precision))}return".0"===precisionDecimalStr?numberWithoutDecimal:"".concat(numberWithoutDecimal).concat(precisionDecimalStr)}const StepHandler=defineComponent({compatConfig:{MODE:3},name:"StepHandler",inheritAttrs:!1,props:{prefixCls:String,upDisabled:Boolean,downDisabled:Boolean,onStep:{type:Function}},slots:["upNode","downNode"],setup:function(props,_ref){var slots=_ref.slots,emit=_ref.emit,stepTimeoutRef=ref(),onStepMouseDown=function(e,up){e.preventDefault(),emit("step",up),stepTimeoutRef.value=setTimeout((function loopStep(){emit("step",up),stepTimeoutRef.value=setTimeout(loopStep,200)}),600)},onStopStep=function(){clearTimeout(stepTimeoutRef.value)};return onBeforeUnmount((function(){onStopStep()})),function(){if(isMobile())return null;var prefixCls=props.prefixCls,upDisabled=props.upDisabled,downDisabled=props.downDisabled,handlerClassName="".concat(prefixCls,"-handler"),upClassName=classNames(handlerClassName,"".concat(handlerClassName,"-up"),_defineProperty$1({},"".concat(handlerClassName,"-up-disabled"),upDisabled)),downClassName=classNames(handlerClassName,"".concat(handlerClassName,"-down"),_defineProperty$1({},"".concat(handlerClassName,"-down-disabled"),downDisabled)),sharedHandlerProps={unselectable:"on",role:"button",onMouseup:onStopStep,onMouseleave:onStopStep},upNode=slots.upNode,downNode=slots.downNode;return createVNode("div",{class:"".concat(handlerClassName,"-wrap")},[createVNode("span",_objectSpread2(_objectSpread2({},sharedHandlerProps),{},{onMousedown:function(e){onStepMouseDown(e,!0)},"aria-label":"Increase Value","aria-disabled":upDisabled,class:upClassName}),[(null==upNode?void 0:upNode())||createVNode("span",{unselectable:"on",class:"".concat(prefixCls,"-handler-up-inner")},null)]),createVNode("span",_objectSpread2(_objectSpread2({},sharedHandlerProps),{},{onMousedown:function(e){onStepMouseDown(e,!1)},"aria-label":"Decrease Value","aria-disabled":downDisabled,class:downClassName}),[(null==downNode?void 0:downNode())||createVNode("span",{unselectable:"on",class:"".concat(prefixCls,"-handler-down-inner")},null)])])}}});var _excluded$1=["prefixCls","min","max","step","defaultValue","value","disabled","readonly","keyboard","controls","autofocus","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","lazy","class","style"],getDecimalValue=function(stringMode,decimalValue){return stringMode||decimalValue.isEmpty()?decimalValue.toString():decimalValue.toNumber()},getDecimalIfValidate=function(value){var decimal=getMiniDecimal(value);return decimal.isInvalidate()?null:decimal},inputNumberProps$1=function(){return{stringMode:{type:Boolean},defaultValue:{type:[String,Number]},value:{type:[String,Number]},prefixCls:{type:String},min:{type:[String,Number]},max:{type:[String,Number]},step:{type:[String,Number],default:1},tabindex:{type:Number},controls:{type:Boolean,default:!0},readonly:{type:Boolean},disabled:{type:Boolean},autofocus:{type:Boolean},keyboard:{type:Boolean,default:!0},parser:{type:Function},formatter:{type:Function},precision:{type:Number},decimalSeparator:{type:String},onInput:{type:Function},onChange:{type:Function},onPressEnter:{type:Function},onStep:{type:Function},onBlur:{type:Function},onFocus:{type:Function}}};const VcInputNumber=defineComponent({compatConfig:{MODE:3},name:"InnerInputNumber",inheritAttrs:!1,props:_objectSpread2(_objectSpread2({},inputNumberProps$1()),{},{lazy:Boolean}),slots:["upHandler","downHandler"],setup:function(props,_ref){var attrs=_ref.attrs,slots=_ref.slots,emit=_ref.emit,expose=_ref.expose,inputRef=ref(),focus=ref(!1),userTypingRef=ref(!1),compositionRef=ref(!1),decimalValue=ref(getMiniDecimal(props.value));var initValue2,getPrecision=function(numStr,userTyping){if(!userTyping)return props.precision>=0?props.precision:Math.max(getNumberPrecision(numStr),getNumberPrecision(props.step))},mergedParser=function(num){var numStr=String(num);if(props.parser)return props.parser(numStr);var parsedStr=numStr;return props.decimalSeparator&&(parsedStr=parsedStr.replace(props.decimalSeparator,".")),parsedStr.replace(/[^\w.-]+/g,"")},inputValue=ref(""),mergedFormatter=function(number,userTyping){if(props.formatter)return props.formatter(number,{userTyping:userTyping,input:String(inputValue.value)});var str="number"==typeof number?num2str(number):number;if(!userTyping){var mergedPrecision=getPrecision(str,userTyping);if(validateNumber(str)&&(props.decimalSeparator||mergedPrecision>=0))str=toFixed(str,props.decimalSeparator||".",mergedPrecision)}return str},initValue=(initValue2=props.value,decimalValue.value.isInvalidate()&&["string","number"].includes(_typeof(initValue2))?Number.isNaN(initValue2)?"":initValue2:mergedFormatter(decimalValue.value.toString(),!1));function setInputValue(newValue,userTyping){inputValue.value=mergedFormatter(newValue.isInvalidate()?newValue.toString(!1):newValue.toString(!userTyping),userTyping)}inputValue.value=initValue;var idRef,cleanUp,maxDecimal=computed((function(){return getDecimalIfValidate(props.max)})),minDecimal=computed((function(){return getDecimalIfValidate(props.min)})),upDisabled=computed((function(){return!(!maxDecimal.value||!decimalValue.value||decimalValue.value.isInvalidate())&&maxDecimal.value.lessEquals(decimalValue.value)})),downDisabled=computed((function(){return!(!minDecimal.value||!decimalValue.value||decimalValue.value.isInvalidate())&&decimalValue.value.lessEquals(minDecimal.value)})),_useCursor=function(inputRef,focused){var selectionRef=ref(null);return[function(){try{var _inputRef$value=inputRef.value,start=_inputRef$value.selectionStart,end=_inputRef$value.selectionEnd,value=_inputRef$value.value,beforeTxt=value.substring(0,start),afterTxt=value.substring(end);selectionRef.value={start:start,end:end,value:value,beforeTxt:beforeTxt,afterTxt:afterTxt}}catch(e){}},function(){if(inputRef.value&&selectionRef.value&&focused.value)try{var value=inputRef.value.value,_selectionRef$value=selectionRef.value,beforeTxt=_selectionRef$value.beforeTxt,afterTxt=_selectionRef$value.afterTxt,start=_selectionRef$value.start,startPos=value.length;if(value.endsWith(afterTxt))startPos=value.length-selectionRef.value.afterTxt.length;else if(value.startsWith(beforeTxt))startPos=beforeTxt.length;else{var beforeLastChar=beforeTxt[start-1],newIndex=value.indexOf(beforeLastChar,start-1);-1!==newIndex&&(startPos=newIndex+1)}inputRef.value.setSelectionRange(startPos,startPos)}catch(e){warning(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(e.message))}}]}(inputRef,focus),_useCursor2=_slicedToArray(_useCursor,2),recordCursor=_useCursor2[0],restoreCursor=_useCursor2[1],getRangeValue=function(target){return maxDecimal.value&&!target.lessEquals(maxDecimal.value)?maxDecimal.value:minDecimal.value&&!minDecimal.value.lessEquals(target)?minDecimal.value:null},isInRange=function(target){return!getRangeValue(target)},triggerValueUpdate=function(newValue,userTyping){var newDecimal,updateValue=newValue,isRangeValidate=isInRange(updateValue)||updateValue.isEmpty();if(updateValue.isEmpty()||userTyping||(updateValue=getRangeValue(updateValue)||updateValue,isRangeValidate=!0),!props.readonly&&!props.disabled&&isRangeValidate){var _props$onChange,numStr=updateValue.toString(),mergedPrecision=getPrecision(numStr,userTyping);if(mergedPrecision>=0&&(updateValue=getMiniDecimal(toFixed(numStr,".",mergedPrecision))),!updateValue.equals(decimalValue.value))newDecimal=updateValue,void 0===props.value&&(decimalValue.value=newDecimal),null===(_props$onChange=props.onChange)||void 0===_props$onChange||_props$onChange.call(props,updateValue.isEmpty()?null:getDecimalValue(props.stringMode,updateValue)),void 0===props.value&&setInputValue(updateValue,userTyping);return updateValue}return decimalValue.value},onNextPromise=(idRef=ref(0),cleanUp=function(){wrapperRaf.cancel(idRef.value)},onBeforeUnmount((function(){cleanUp()})),function(callback){cleanUp(),idRef.value=wrapperRaf((function(){callback()}))}),collectInputValue=function collectInputValue2(inputStr){var _props$onInput;if(recordCursor(),inputValue.value=inputStr,!compositionRef.value){var finalDecimal=getMiniDecimal(mergedParser(inputStr));finalDecimal.isNaN()||triggerValueUpdate(finalDecimal,!0)}null===(_props$onInput=props.onInput)||void 0===_props$onInput||_props$onInput.call(props,inputStr),onNextPromise((function(){var nextInputStr=inputStr;props.parser||(nextInputStr=inputStr.replace(/ã€‚/g,".")),nextInputStr!==inputStr&&collectInputValue2(nextInputStr)}))},onCompositionStart=function(){compositionRef.value=!0},onCompositionEnd=function(){compositionRef.value=!1,collectInputValue(inputRef.value.value)},onInternalInput=function(e){collectInputValue(e.target.value)},onInternalStep=function(up){var _props$onStep,_inputRef$value;if(!(up&&upDisabled.value||!up&&downDisabled.value)){userTypingRef.value=!1;var stepDecimal=getMiniDecimal(props.step);up||(stepDecimal=stepDecimal.negate());var target=(decimalValue.value||getMiniDecimal(0)).add(stepDecimal.toString()),updatedValue=triggerValueUpdate(target,!1);null===(_props$onStep=props.onStep)||void 0===_props$onStep||_props$onStep.call(props,getDecimalValue(props.stringMode,updatedValue),{offset:props.step,type:up?"up":"down"}),null===(_inputRef$value=inputRef.value)||void 0===_inputRef$value||_inputRef$value.focus()}},flushInputValue=function(userTyping){var parsedValue=getMiniDecimal(mergedParser(inputValue.value)),formatValue=parsedValue;formatValue=parsedValue.isNaN()?decimalValue.value:triggerValueUpdate(parsedValue,userTyping),void 0!==props.value?setInputValue(decimalValue.value,!1):formatValue.isNaN()||setInputValue(formatValue,!1)},onKeyDown=function(event){var _props$onPressEnter,which=event.which;(userTypingRef.value=!0,which===KeyCode.ENTER)&&(compositionRef.value||(userTypingRef.value=!1),flushInputValue(!1),null===(_props$onPressEnter=props.onPressEnter)||void 0===_props$onPressEnter||_props$onPressEnter.call(props,event));!1!==props.keyboard&&!compositionRef.value&&[KeyCode.UP,KeyCode.DOWN].includes(which)&&(onInternalStep(KeyCode.UP===which),event.preventDefault())},onKeyUp=function(){userTypingRef.value=!1},onBlur=function(e){flushInputValue(!1),focus.value=!1,userTypingRef.value=!1,emit("blur",e)};return watch((function(){return props.precision}),(function(){decimalValue.value.isInvalidate()||setInputValue(decimalValue.value,!1)}),{flush:"post"}),watch((function(){return props.value}),(function(){var newValue=getMiniDecimal(props.value);decimalValue.value=newValue;var currentParsedValue=getMiniDecimal(mergedParser(inputValue.value));newValue.equals(currentParsedValue)&&userTypingRef.value&&!props.formatter||setInputValue(newValue,userTypingRef.value)}),{flush:"post"}),watch(inputValue,(function(){props.formatter&&restoreCursor()}),{flush:"post"}),watch((function(){return props.disabled}),(function(val){val&&(focus.value=!1)})),expose({focus:function(){var _inputRef$value2;null===(_inputRef$value2=inputRef.value)||void 0===_inputRef$value2||_inputRef$value2.focus()},blur:function(){var _inputRef$value3;null===(_inputRef$value3=inputRef.value)||void 0===_inputRef$value3||_inputRef$value3.blur()}}),function(){var _classNames,_attrs$props=_objectSpread2(_objectSpread2({},attrs),props),_attrs$props$prefixCl=_attrs$props.prefixCls,prefixCls=void 0===_attrs$props$prefixCl?"rc-input-number":_attrs$props$prefixCl,min=_attrs$props.min,max=_attrs$props.max,_attrs$props$step=_attrs$props.step,step=void 0===_attrs$props$step?1:_attrs$props$step;_attrs$props.defaultValue,_attrs$props.value;var disabled=_attrs$props.disabled,readonly=_attrs$props.readonly;_attrs$props.keyboard;var _attrs$props$controls=_attrs$props.controls,controls=void 0===_attrs$props$controls||_attrs$props$controls,autofocus=_attrs$props.autofocus;_attrs$props.stringMode,_attrs$props.parser,_attrs$props.formatter,_attrs$props.precision,_attrs$props.decimalSeparator,_attrs$props.onChange,_attrs$props.onInput,_attrs$props.onPressEnter,_attrs$props.onStep;var lazy=_attrs$props.lazy,className=_attrs$props.class,style=_attrs$props.style,inputProps=_objectWithoutProperties(_attrs$props,_excluded$1),upHandler=slots.upHandler,downHandler=slots.downHandler,inputClassName="".concat(prefixCls,"-input"),eventProps={};return lazy?eventProps.onChange=onInternalInput:eventProps.onInput=onInternalInput,createVNode("div",{class:classNames(prefixCls,className,(_classNames={},_defineProperty$1(_classNames,"".concat(prefixCls,"-focused"),focus.value),_defineProperty$1(_classNames,"".concat(prefixCls,"-disabled"),disabled),_defineProperty$1(_classNames,"".concat(prefixCls,"-readonly"),readonly),_defineProperty$1(_classNames,"".concat(prefixCls,"-not-a-number"),decimalValue.value.isNaN()),_defineProperty$1(_classNames,"".concat(prefixCls,"-out-of-range"),!decimalValue.value.isInvalidate()&&!isInRange(decimalValue.value)),_classNames)),style:style,onKeydown:onKeyDown,onKeyup:onKeyUp},[controls&&createVNode(StepHandler,{prefixCls:prefixCls,upDisabled:upDisabled.value,downDisabled:downDisabled.value,onStep:onInternalStep},{upNode:upHandler,downNode:downHandler}),createVNode("div",{class:"".concat(inputClassName,"-wrap")},[createVNode("input",_objectSpread2(_objectSpread2(_objectSpread2({autofocus:autofocus,autocomplete:"off",role:"spinbutton","aria-valuemin":min,"aria-valuemax":max,"aria-valuenow":decimalValue.value.isInvalidate()?null:decimalValue.value.toString(),step:step},inputProps),{},{ref:inputRef,class:inputClassName,value:inputValue.value,disabled:disabled,readonly:readonly,onFocus:function(e){focus.value=!0,emit("focus",e)}},eventProps),{},{onBlur:onBlur,onCompositionstart:onCompositionStart,onCompositionend:onCompositionEnd}),null)])])}}});function isValidValue(val){return null!=val}var _excluded=["class","bordered","readonly","style","addonBefore","addonAfter","prefix","valueModifiers"],baseProps=inputNumberProps$1(),InputNumber=defineComponent({compatConfig:{MODE:3},name:"AInputNumber",inheritAttrs:!1,props:_objectSpread2(_objectSpread2({},baseProps),{},{size:{type:String},bordered:{type:Boolean,default:!0},placeholder:String,name:String,id:String,type:String,addonBefore:PropTypes.any,addonAfter:PropTypes.any,prefix:PropTypes.any,"onUpdate:value":baseProps.onChange,valueModifiers:Object}),slots:["addonBefore","addonAfter","prefix"],setup:function(props,_ref){var emit=_ref.emit,expose=_ref.expose,attrs=_ref.attrs,slots=_ref.slots,formItemContext=useInjectFormItemContext(),_useConfigInject=useConfigInject("input-number",props),prefixCls=_useConfigInject.prefixCls,size=_useConfigInject.size,direction=_useConfigInject.direction,mergedValue=ref(void 0===props.value?props.defaultValue:props.value),focused=ref(!1);watch((function(){return props.value}),(function(){mergedValue.value=props.value}));var inputNumberRef=ref(null);expose({focus:function(){var _inputNumberRef$value;null===(_inputNumberRef$value=inputNumberRef.value)||void 0===_inputNumberRef$value||_inputNumberRef$value.focus()},blur:function(){var _inputNumberRef$value2;null===(_inputNumberRef$value2=inputNumberRef.value)||void 0===_inputNumberRef$value2||_inputNumberRef$value2.blur()}});var handleChange=function(val){void 0===props.value&&(mergedValue.value=val),emit("update:value",val),emit("change",val),formItemContext.onFieldChange()},handleBlur=function(e){focused.value=!1,emit("blur",e),formItemContext.onFieldBlur()},handleFocus=function(e){focused.value=!0,emit("focus",e)};return function(){var _slots$addonBefore,_slots$addonAfter,_slots$prefix,_classNames,_attrs$props=_objectSpread2(_objectSpread2({},attrs),props),className=_attrs$props.class,bordered=_attrs$props.bordered,readonly=_attrs$props.readonly,style=_attrs$props.style,_attrs$props$addonBef=_attrs$props.addonBefore,addonBefore=void 0===_attrs$props$addonBef?null===(_slots$addonBefore=slots.addonBefore)||void 0===_slots$addonBefore?void 0:_slots$addonBefore.call(slots):_attrs$props$addonBef,_attrs$props$addonAft=_attrs$props.addonAfter,addonAfter=void 0===_attrs$props$addonAft?null===(_slots$addonAfter=slots.addonAfter)||void 0===_slots$addonAfter?void 0:_slots$addonAfter.call(slots):_attrs$props$addonAft,_attrs$props$prefix=_attrs$props.prefix,prefix=void 0===_attrs$props$prefix?null===(_slots$prefix=slots.prefix)||void 0===_slots$prefix?void 0:_slots$prefix.call(slots):_attrs$props$prefix,_attrs$props$valueMod=_attrs$props.valueModifiers,valueModifiers=void 0===_attrs$props$valueMod?{}:_attrs$props$valueMod,others=_objectWithoutProperties(_attrs$props,_excluded),preCls=prefixCls.value,mergeSize=size.value,inputNumberClass=classNames((_defineProperty$1(_classNames={},"".concat(preCls,"-lg"),"large"===mergeSize),_defineProperty$1(_classNames,"".concat(preCls,"-sm"),"small"===mergeSize),_defineProperty$1(_classNames,"".concat(preCls,"-rtl"),"rtl"===direction.value),_defineProperty$1(_classNames,"".concat(preCls,"-readonly"),readonly),_defineProperty$1(_classNames,"".concat(preCls,"-borderless"),!bordered),_classNames),className),element=createVNode(VcInputNumber,_objectSpread2(_objectSpread2({},omit(others,["size","defaultValue"])),{},{ref:inputNumberRef,lazy:!!valueModifiers.lazy,value:mergedValue.value,class:inputNumberClass,prefixCls:preCls,readonly:readonly,onChange:handleChange,onBlur:handleBlur,onFocus:handleFocus}),{upHandler:function(){return createVNode(UpOutlined,{class:"".concat(preCls,"-handler-up-inner")},null)},downHandler:function(){return createVNode(DownOutlined,{class:"".concat(preCls,"-handler-down-inner")},null)}}),hasAddon=isValidValue(addonBefore)||isValidValue(addonAfter);if(isValidValue(prefix)){var _classNames2,affixWrapperCls=classNames("".concat(preCls,"-affix-wrapper"),(_defineProperty$1(_classNames2={},"".concat(preCls,"-affix-wrapper-focused"),focused.value),_defineProperty$1(_classNames2,"".concat(preCls,"-affix-wrapper-disabled"),props.disabled),_defineProperty$1(_classNames2,"".concat(preCls,"-affix-wrapper-rtl"),"rtl"===direction.value),_defineProperty$1(_classNames2,"".concat(preCls,"-affix-wrapper-readonly"),readonly),_defineProperty$1(_classNames2,"".concat(preCls,"-affix-wrapper-borderless"),!bordered),_defineProperty$1(_classNames2,"".concat(className),!hasAddon&&className),_classNames2));element=createVNode("div",{class:affixWrapperCls,style:style,onMouseup:function(){return inputNumberRef.value.focus()}},[createVNode("span",{class:"".concat(preCls,"-prefix")},[prefix]),element])}if(hasAddon){var _classNames4,wrapperClassName="".concat(preCls,"-group"),addonClassName="".concat(wrapperClassName,"-addon"),addonBeforeNode=addonBefore?createVNode("div",{class:addonClassName},[addonBefore]):null,addonAfterNode=addonAfter?createVNode("div",{class:addonClassName},[addonAfter]):null,mergedWrapperClassName=classNames("".concat(preCls,"-wrapper"),wrapperClassName,_defineProperty$1({},"".concat(wrapperClassName,"-rtl"),"rtl"===direction.value)),mergedGroupClassName=classNames("".concat(preCls,"-group-wrapper"),(_defineProperty$1(_classNames4={},"".concat(preCls,"-group-wrapper-sm"),"small"===mergeSize),_defineProperty$1(_classNames4,"".concat(preCls,"-group-wrapper-lg"),"large"===mergeSize),_defineProperty$1(_classNames4,"".concat(preCls,"-group-wrapper-rtl"),"rtl"===direction.value),_classNames4),className);element=createVNode("div",{class:mergedGroupClassName,style:style},[createVNode("div",{class:mergedWrapperClassName},[addonBeforeNode,element,addonAfterNode])])}return cloneElement(element,{style:style})}}});const InputNumber$1=_extends(InputNumber,{install:function(app){return app.component(InputNumber.name,InputNumber),app}});export{InputNumber$1 as I};
