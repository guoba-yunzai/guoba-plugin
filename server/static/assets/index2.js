const __vite__fileDeps=["assets/SiderTrigger.js","assets/index.js","assets/index.css","assets/index25.js","assets/siteSetting.js","assets/index19.js","assets/useWindowSizeFn.js","assets/FullscreenOutlined.js","assets/index4.css","assets/header.js","assets/common.js","assets/PluginIcon.vue_vue_type_style_index_0_lang.js","assets/PluginIcon.css","assets/index17.js","assets/useContentViewHeight.js","assets/index11.css","assets/uniqBy.js","assets/index29.js","assets/index10.css","assets/RedoOutlined.js","assets/lock.js","assets/index22.css","assets/Breadcrumb.js","assets/index32.js","assets/index14.css","assets/Breadcrumb.css","assets/index26.js","assets/index33.js","assets/index15.css","assets/transButton.js","assets/CopyOutlined.js","assets/index23.css","assets/ErrorAction.js","assets/index27.js","assets/SessionTimeoutLogin.js","assets/Login.vue_vue_type_style_index_0_lang.js","assets/GuobaLoginForm.vue_vue_type_script_setup_true_lang.js","assets/ForgetPasswordForm.vue_vue_type_script_setup_true_lang.js","assets/LoginFormTitle.vue_vue_type_script_setup_true_lang.js","assets/index24.js","assets/useFormItem.js","assets/index9.css","assets/RegisterForm.vue_vue_type_script_setup_true_lang.js","assets/index23.js","assets/index8.css","assets/MobileForm.vue_vue_type_script_setup_true_lang.js","assets/QrCodeForm.vue_vue_type_script_setup_true_lang.js","assets/download.js","assets/Login.css","assets/SessionTimeoutLogin.css","assets/scrollTo.js","assets/index20.css","assets/index28.js","assets/GithubFilled.js","assets/index21.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(obj,key2,value)=>key2 in obj?__defProp(obj,key2,{enumerable:!0,configurable:!0,writable:!0,value:value}):obj[key2]=value,__spreadValues=(a,b)=>{for(var prop in b||(b={}))__hasOwnProp.call(b,prop)&&__defNormalProp(a,prop,b[prop]);if(__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(b))__propIsEnum.call(b,prop)&&__defNormalProp(a,prop,b[prop]);return a},__async=(__this,__arguments,generator)=>new Promise(((resolve,reject)=>{var fulfilled=value=>{try{step(generator.next(value))}catch(e){reject(e)}},rejected=value=>{try{step(generator.throw(value))}catch(e){reject(e)}},step=x=>x.done?resolve(x.value):Promise.resolve(x.value).then(fulfilled,rejected);step((generator=generator.apply(__this,__arguments)).next())}));import{j as createVNode,I as Icon,p as propTypes,a7 as MenuModeEnum,a8 as MenuTypeEnum,a9 as ThemeEnum,d as defineComponent,a4 as Icon$1,z as useDesign,A as computed,aa as useI18n,b as _export_sfc,c as resolveComponent,o as openBlock,e as createElementBlock,h as createBlock,C as normalizeClass,B as createCommentVNode,k as createTextVNode,m as toDisplayString,ab as Menu$1,i as withCtx,H as mergeProps,a2 as normalizeProps,F as Fragment,f as renderList,ac as useMenuSetting,D as unref,ad as useTimeoutFn,ae as toRaw,af as uniq,ag as getAllParentPath,r as ref,a as reactive,t as toRefs,ah as useRouter,ai as listenerRouteChange,aj as REDIRECT_NAME,w as watch,ak as getCurrentParentPath,al as isFunction,am as createContext,an as useContext,N as watchEffect,J as provide,ao as onMounted,n as nextTick,ap as mitt,aq as getCurrentInstance,ar as renderSlot,as as Tooltip,E as createBaseVNode,at as withModifiers,Y as normalizeStyle,au as CollapseTransition,a0 as Popover,s as inject,av as onBeforeMount,aw as isBoolean,ax as isObject,V as withDirectives,Z as vShow,a3 as guardReactiveProps,K as createAsyncComponent,L as __vitePreload,ay as useDebounceFn,az as isUrl,aA as openWindow,aB as useAppInject,aC as usePermissionStore,aD as MenuSplitTyeEnum,aE as getMenus,aF as getShallowMenus,aG as useThrottleFn,aH as getChildrenMenus,aI as useGo,aJ as useRootSetting,aK as toRef,aL as ScrollContainer,aM as AppLogo,aN as useFullContent,aO as useAppStore,aP as useFullscreen,aQ as Layout,aR as AppSearch,aS as useLocale,aT as SettingButtonPositionEnum,aU as useMultipleTabStore,aV as useTransitionSetting,aW as Transition,aX as resolveDynamicComponent,aY as KeepAlive,aZ as resolveDirective,a_ as TriggerEnum,a$ as h,b0 as createSlots,b1 as ClickOutside,b2 as useGlobSetting,b3 as SIDE_BAR_MINI_WIDTH,b4 as SIDE_BAR_SHOW_TIT_MINI_WIDTH,b5 as useTabs,b6 as Dropdown,b7 as triggerWindowResize,b8 as setting,b9 as isNullAndUnDef,ba as Tabs,a5 as useUserStore,bb as onUnmounted}from"./index.js";import{_ as _sfc_main$s}from"./PluginIcon.vue_vue_type_style_index_0_lang.js";import{F as FullscreenExitOutlined,a as FullscreenOutlined}from"./FullscreenOutlined.js";import FramePage from"./index17.js";import{u as uniqBy}from"./uniqBy.js";import{u as useContentViewHeight,a as useLayoutHeight}from"./useContentViewHeight.js";import{D as Drawer}from"./index29.js";import{R as RedoOutlined}from"./RedoOutlined.js";import{u as useLockStore}from"./lock.js";var MenuFoldOutlined$1={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z"}}]},name:"menu-fold",theme:"outlined"};function _objectSpread$1(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?Object(arguments[i]):{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter((function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable})))),ownKeys.forEach((function(key2){_defineProperty$1(target,key2,source[key2])}))}return target}function _defineProperty$1(obj,key2,value){return key2 in obj?Object.defineProperty(obj,key2,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key2]=value,obj}var MenuFoldOutlined=function(props,context){var p=_objectSpread$1({},props,context.attrs);return createVNode(Icon,_objectSpread$1({},p,{icon:MenuFoldOutlined$1}),null)};MenuFoldOutlined.displayName="MenuFoldOutlined",MenuFoldOutlined.inheritAttrs=!1;var MenuUnfoldOutlined$1={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"};function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?Object(arguments[i]):{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter((function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable})))),ownKeys.forEach((function(key2){_defineProperty(target,key2,source[key2])}))}return target}function _defineProperty(obj,key2,value){return key2 in obj?Object.defineProperty(obj,key2,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key2]=value,obj}var MenuUnfoldOutlined=function(props,context){var p=_objectSpread({},props,context.attrs);return createVNode(Icon,_objectSpread({},p,{icon:MenuUnfoldOutlined$1}),null)};MenuUnfoldOutlined.displayName="MenuUnfoldOutlined",MenuUnfoldOutlined.inheritAttrs=!1;const basicProps={items:{type:Array,default:()=>[]},collapsedShowTitle:propTypes.bool,inlineIndent:propTypes.number.def(20),mode:{type:String,default:MenuModeEnum.INLINE},type:{type:String,default:MenuTypeEnum.MIX},theme:{type:String,default:ThemeEnum.DARK},inlineCollapsed:propTypes.bool,mixSider:propTypes.bool,isHorizontal:propTypes.bool,accordion:propTypes.bool.def(!0),beforeClickFn:{type:Function}},itemProps={item:{type:Object,default:{}},level:propTypes.number,theme:propTypes.oneOf(["dark","light"]),showTitle:propTypes.bool,isHorizontal:propTypes.bool},contentProps={item:{type:Object,default:null},showTitle:propTypes.bool.def(!0),level:propTypes.number.def(0),isHorizontal:propTypes.bool.def(!0)},{t:t}=useI18n();const MenuItemContent=_export_sfc(defineComponent({name:"MenuItemContent",components:{Icon:Icon$1},props:contentProps,setup(props){const{prefixCls:prefixCls}=useDesign("basic-menu-item-content");return{prefixCls:prefixCls,getI18nName:computed((()=>{var _a;return t(null==(_a=props.item)?void 0:_a.name)})),getIcon:computed((()=>{var _a;return null==(_a=props.item)?void 0:_a.icon}))}}}),[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_Icon=resolveComponent("Icon");return openBlock(),createElementBlock("span",{class:normalizeClass(`${_ctx.prefixCls}- flex items-center `)},[_ctx.getIcon?(openBlock(),createBlock(_component_Icon,{key:0,icon:_ctx.getIcon,size:18,class:normalizeClass(`${_ctx.prefixCls}-wrapper__icon mr-2`)},null,8,["icon","class"])):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(_ctx.getI18nName),1)],2)}]]),_sfc_main$q=defineComponent({name:"BasicMenuItem",components:{MenuItem:Menu$1.Item,MenuItemContent:MenuItemContent},props:itemProps,setup:()=>({})});const _sfc_main$p=defineComponent({name:"BasicSubMenuItem",isSubMenu:!0,components:{BasicMenuItem:_export_sfc(_sfc_main$q,[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_MenuItemContent=resolveComponent("MenuItemContent"),_component_MenuItem=resolveComponent("MenuItem");return openBlock(),createBlock(_component_MenuItem,{key:_ctx.item.path},{default:withCtx((()=>[createVNode(_component_MenuItemContent,mergeProps(_ctx.$props,{item:_ctx.item}),null,16,["item"])])),_:1})}]]),SubMenu:Menu$1.SubMenu,MenuItemContent:MenuItemContent},props:itemProps,setup(props){const{prefixCls:prefixCls}=useDesign("basic-menu-item");return{prefixCls:prefixCls,menuHasChildren:function(menuTreeItem){var _a;return!(null==(_a=menuTreeItem.meta)?void 0:_a.hideChildrenInMenu)&&Reflect.has(menuTreeItem,"children")&&!!menuTreeItem.children&&menuTreeItem.children.length>0},getShowMenu:computed((()=>{var _a;return!(null==(_a=props.item.meta)?void 0:_a.hideMenu)}))}}});const BasicMenu=_export_sfc(defineComponent({name:"BasicMenu",components:{Menu:Menu$1,BasicSubMenuItem:_export_sfc(_sfc_main$p,[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_BasicMenuItem=resolveComponent("BasicMenuItem"),_component_MenuItemContent=resolveComponent("MenuItemContent"),_component_BasicSubMenuItem=resolveComponent("BasicSubMenuItem",!0),_component_SubMenu=resolveComponent("SubMenu");return openBlock(),createElementBlock(Fragment,null,[!_ctx.menuHasChildren(_ctx.item)&&_ctx.getShowMenu?(openBlock(),createBlock(_component_BasicMenuItem,normalizeProps(mergeProps({key:0},_ctx.$props)),null,16)):createCommentVNode("",!0),_ctx.menuHasChildren(_ctx.item)&&_ctx.getShowMenu?(openBlock(),createBlock(_component_SubMenu,{class:normalizeClass([_ctx.theme]),key:`submenu-${_ctx.item.path}`,popupClassName:"app-top-menu-popup"},{title:withCtx((()=>[createVNode(_component_MenuItemContent,mergeProps(_ctx.$props,{item:_ctx.item}),null,16,["item"])])),default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(_ctx.item.children||[],(childrenItem=>(openBlock(),createBlock(_component_BasicSubMenuItem,mergeProps({key:childrenItem.path},_ctx.$props,{item:childrenItem}),null,16,["item"])))),128))])),_:1},8,["class"])):createCommentVNode("",!0)],64)}]])},props:basicProps,emits:["menuClick"],setup(props,{emit:emit}){const isClickGo=ref(!1),currentActiveMenu=ref(""),menuState=reactive({defaultSelectedKeys:[],openKeys:[],selectedKeys:[],collapsedOpenKeys:[]}),{prefixCls:prefixCls}=useDesign("basic-menu"),{items:items,mode:mode,accordion:accordion}=toRefs(props),{getCollapsed:getCollapsed,getTopMenuAlign:getTopMenuAlign,getSplit:getSplit}=useMenuSetting(),{currentRoute:currentRoute}=useRouter(),{handleOpenChange:handleOpenChange,setOpenKeys:setOpenKeys,getOpenKeys:getOpenKeys}=function(menuState,menus,mode,accordion){const{getCollapsed:getCollapsed,getIsMixSidebar:getIsMixSidebar}=useMenuSetting();return{setOpenKeys:function(path){return __async(this,null,(function*(){if(mode.value===MenuModeEnum.HORIZONTAL)return;const native=unref(getIsMixSidebar);useTimeoutFn((()=>{const menuList=toRaw(menus.value);0!==(null==menuList?void 0:menuList.length)?unref(accordion)?menuState.openKeys=getAllParentPath(menuList,path):menuState.openKeys=uniq([...menuState.openKeys,...getAllParentPath(menuList,path)]):menuState.openKeys=[]}),16,!native)}))},resetKeys:function(){menuState.selectedKeys=[],menuState.openKeys=[]},getOpenKeys:computed((()=>!unref(getIsMixSidebar)&&unref(getCollapsed)?menuState.collapsedOpenKeys:menuState.openKeys)),handleOpenChange:function(openKeys){if(unref(mode)===MenuModeEnum.HORIZONTAL||!unref(accordion)||unref(getIsMixSidebar))menuState.openKeys=openKeys;else{const rootSubMenuKeys=[];for(const{children:children,path:path}of unref(menus))children&&children.length>0&&rootSubMenuKeys.push(path);if(unref(getCollapsed))menuState.collapsedOpenKeys=openKeys;else{const latestOpenKey=openKeys.find((key2=>-1===menuState.openKeys.indexOf(key2)));-1===rootSubMenuKeys.indexOf(latestOpenKey)?menuState.openKeys=openKeys:menuState.openKeys=latestOpenKey?[latestOpenKey]:[]}}}}}(menuState,items,mode,accordion),getIsTopMenu=computed((()=>{const{type:type,mode:mode2}=props;return type===MenuTypeEnum.TOP_MENU&&mode2===MenuModeEnum.HORIZONTAL||props.isHorizontal&&unref(getSplit)})),getMenuClass=computed((()=>{const align=props.isHorizontal&&unref(getSplit)?"start":unref(getTopMenuAlign);return[prefixCls,`justify-${align}`,{[`${prefixCls}__second`]:!props.isHorizontal&&unref(getSplit),[`${prefixCls}__sidebar-hor`]:unref(getIsTopMenu)}]})),getInlineCollapseOptions=computed((()=>{const inlineCollapseOptions={};return props.mode===MenuModeEnum.INLINE&&(inlineCollapseOptions.inlineCollapsed=!props.mixSider&&unref(getCollapsed)),inlineCollapseOptions}));function handleMenuChange(route){return __async(this,null,(function*(){var _a;if(unref(isClickGo))return void(isClickGo.value=!1);const path=(null==(_a=(route||unref(currentRoute)).meta)?void 0:_a.currentActiveMenu)||(route||unref(currentRoute)).path;if(setOpenKeys(path),!unref(currentActiveMenu))if(props.isHorizontal&&unref(getSplit)){const parentPath=yield getCurrentParentPath(path);menuState.selectedKeys=[parentPath]}else{const parentPaths=yield getAllParentPath(props.items,path);menuState.selectedKeys=parentPaths}}))}return listenerRouteChange((route=>{var _a;route.name!==REDIRECT_NAME&&(handleMenuChange(route),currentActiveMenu.value=null==(_a=route.meta)?void 0:_a.currentActiveMenu,unref(currentActiveMenu)&&(menuState.selectedKeys=[unref(currentActiveMenu)],setOpenKeys(unref(currentActiveMenu))))})),!props.mixSider&&watch((()=>props.items),(()=>{handleMenuChange()})),__spreadValues({handleMenuClick:function(_0){return __async(this,arguments,(function*({key:key2}){const{beforeClickFn:beforeClickFn}=props;if(beforeClickFn&&isFunction(beforeClickFn)){if(!(yield beforeClickFn(key2)))return}emit("menuClick",key2),isClickGo.value=!0,menuState.selectedKeys=[key2]}))},getInlineCollapseOptions:getInlineCollapseOptions,getMenuClass:getMenuClass,handleOpenChange:handleOpenChange,getOpenKeys:getOpenKeys},toRefs(menuState))}}),[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_BasicSubMenuItem=resolveComponent("BasicSubMenuItem"),_component_Menu=resolveComponent("Menu");return openBlock(),createBlock(_component_Menu,mergeProps({selectedKeys:_ctx.selectedKeys,defaultSelectedKeys:_ctx.defaultSelectedKeys,mode:_ctx.mode,openKeys:_ctx.getOpenKeys,inlineIndent:_ctx.inlineIndent,theme:_ctx.theme,onOpenChange:_ctx.handleOpenChange,class:_ctx.getMenuClass,onClick:_ctx.handleMenuClick,subMenuOpenDelay:.2},_ctx.getInlineCollapseOptions),{default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(_ctx.items,(item=>(openBlock(),createBlock(_component_BasicSubMenuItem,{key:item.path,item:item,theme:_ctx.theme,isHorizontal:_ctx.isHorizontal},null,8,["item","theme","isHorizontal"])))),128))])),_:1},16,["selectedKeys","defaultSelectedKeys","mode","openKeys","inlineIndent","theme","onOpenChange","class","onClick"])}]]),key=Symbol();function useSimpleRootMenuContext(){return useContext(key)}const Menu=_export_sfc(defineComponent({name:"Menu",props:{theme:propTypes.oneOf(["light","dark"]).def("light"),activeName:propTypes.oneOfType([propTypes.string,propTypes.number]),openNames:{type:Array,default:()=>[]},accordion:propTypes.bool.def(!0),width:propTypes.string.def("100%"),collapsedWidth:propTypes.string.def("48px"),indentSize:propTypes.number.def(16),collapse:propTypes.bool.def(!0),activeSubMenuNames:{type:Array,default:()=>[]}},emits:["select","open-change"],setup(props,{emit:emit}){const rootMenuEmitter=mitt(),instance=getCurrentInstance(),currentActiveName=ref(""),openedNames=ref([]),{prefixCls:prefixCls}=useDesign("menu"),isRemoveAllPopup=ref(!1);createContext({rootMenuEmitter:rootMenuEmitter,activeName:currentActiveName},key,{readonly:!1,native:!0});const getClass=computed((()=>{const{theme:theme}=props;return[prefixCls,`${prefixCls}-${theme}`,`${prefixCls}-vertical`,{[`${prefixCls}-collapse`]:props.collapse}]}));function updateOpened(){rootMenuEmitter.emit("on-update-opened",openedNames.value)}function removeAll(){openedNames.value=[],updateOpened()}return watchEffect((()=>{openedNames.value=props.openNames})),watchEffect((()=>{props.activeName&&(currentActiveName.value=props.activeName)})),watch((()=>props.openNames),(()=>{nextTick((()=>{updateOpened()}))})),provide(`subMenu:${null==instance?void 0:instance.uid}`,{addSubMenu:function(name){openedNames.value.includes(name)||(openedNames.value.push(name),updateOpened())},removeSubMenu:function(name){openedNames.value=openedNames.value.filter((item=>item!==name)),updateOpened()},getOpenNames:()=>openedNames.value,removeAll:removeAll,isRemoveAllPopup:isRemoveAllPopup,sliceIndex:function(index2){-1!==index2&&(openedNames.value=openedNames.value.slice(0,index2+1),updateOpened())},level:0,props:props}),onMounted((()=>{openedNames.value=props.collapse?[]:[...props.openNames],updateOpened(),rootMenuEmitter.on("on-menu-item-select",(name=>{currentActiveName.value=name,nextTick((()=>{props.collapse&&removeAll()})),emit("select",name)})),rootMenuEmitter.on("open-name-change",(({name:name,opened:opened})=>{if(opened&&!openedNames.value.includes(name))openedNames.value.push(name);else if(!opened){const index2=openedNames.value.findIndex((item=>item===name));-1!==index2&&openedNames.value.splice(index2,1)}}))})),{getClass:getClass,openedNames:openedNames}}}),[["render",function(_ctx,_cache,$props,$setup,$data,$options){return openBlock(),createElementBlock("ul",{class:normalizeClass(_ctx.getClass)},[renderSlot(_ctx.$slots,"default")],2)}]]);function useMenuItem(instance){const getParentMenu=computed((()=>findParentMenu(["Menu","SubMenu"]))),getParentRootMenu=computed((()=>findParentMenu(["Menu"]))),getParentSubMenu=computed((()=>findParentMenu(["SubMenu"]))),getItemStyle=computed((()=>{var _a,_b,_c;let parent=null==instance?void 0:instance.parent;if(!parent)return{};const indentSize=null!=(_b=null==(_a=unref(getParentRootMenu))?void 0:_a.props.indentSize)?_b:20;let padding=indentSize;if(null==(_c=unref(getParentRootMenu))?void 0:_c.props.collapse)padding=indentSize;else for(;parent&&"Menu"!==parent.type.name;)"SubMenu"===parent.type.name&&(padding+=indentSize),parent=parent.parent;return{paddingLeft:padding+"px"}}));function findParentMenu(name){let parent=null==instance?void 0:instance.parent;if(!parent)return null;for(;parent&&-1===name.indexOf(parent.type.name);)parent=parent.parent;return parent}return{getParentMenu:getParentMenu,getParentInstance:function(instance2,name="SubMenu"){let parent=instance2.parent;for(;parent;){if(parent.type.name!==name)return parent;parent=parent.parent}return parent},getParentRootMenu:getParentRootMenu,getParentList:function(){let parent=instance;if(!parent)return{uidList:[],list:[]};const ret=[];for(;parent&&"Menu"!==parent.type.name;)"SubMenu"===parent.type.name&&ret.push(parent),parent=parent.parent;return{uidList:ret.map((item=>item.uid)),list:ret}},getParentSubMenu:getParentSubMenu,getItemStyle:getItemStyle}}const MenuItem=_export_sfc(defineComponent({name:"MenuItem",components:{Tooltip:Tooltip},props:{name:{type:[String,Number],required:!0},disabled:propTypes.bool},setup(props,{slots:slots}){const instance=getCurrentInstance(),active=ref(!1),{getItemStyle:getItemStyle,getParentList:getParentList,getParentMenu:getParentMenu,getParentRootMenu:getParentRootMenu}=useMenuItem(instance),{prefixCls:prefixCls}=useDesign("menu"),{rootMenuEmitter:rootMenuEmitter,activeName:activeName}=useSimpleRootMenuContext(),getClass=computed((()=>[`${prefixCls}-item`,{[`${prefixCls}-item-active`]:unref(active),[`${prefixCls}-item-selected`]:unref(active),[`${prefixCls}-item-disabled`]:!!props.disabled}])),getCollapse=computed((()=>{var _a;return null==(_a=unref(getParentRootMenu))?void 0:_a.props.collapse})),showTooptip=computed((()=>{var _a;return"Menu"===(null==(_a=unref(getParentMenu))?void 0:_a.type.name)&&unref(getCollapse)&&slots.title}));return watch((()=>activeName.value),(name=>{if(name===props.name){const{list:list,uidList:uidList}=getParentList();active.value=!0,list.forEach((item=>{item.proxy&&(item.proxy.active=!0)})),rootMenuEmitter.emit("on-update-active-name:submenu",uidList)}else active.value=!1}),{immediate:!0}),{getClass:getClass,prefixCls:prefixCls,getItemStyle:getItemStyle,getCollapse:getCollapse,handleClickItem:function(){const{disabled:disabled}=props;if(disabled)return;if(rootMenuEmitter.emit("on-menu-item-select",props.name),unref(getCollapse))return;const{uidList:uidList}=getParentList();rootMenuEmitter.emit("on-update-opened",{opend:!1,parent:null==instance?void 0:instance.parent,uidList:uidList})},showTooptip:showTooptip}}}),[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_Tooltip=resolveComponent("Tooltip");return openBlock(),createElementBlock("li",{class:normalizeClass(_ctx.getClass),onClick:_cache[0]||(_cache[0]=withModifiers(((...args)=>_ctx.handleClickItem&&_ctx.handleClickItem(...args)),["stop"])),style:normalizeStyle(_ctx.getCollapse?{}:_ctx.getItemStyle)},[_ctx.showTooptip?(openBlock(),createBlock(_component_Tooltip,{key:0,placement:"right"},{title:withCtx((()=>[renderSlot(_ctx.$slots,"title")])),default:withCtx((()=>[createBaseVNode("div",{class:normalizeClass(`${_ctx.prefixCls}-tooltip`)},[renderSlot(_ctx.$slots,"default")],2)])),_:3})):(openBlock(),createElementBlock(Fragment,{key:1},[renderSlot(_ctx.$slots,"default"),renderSlot(_ctx.$slots,"title")],64))],6)}]]),_sfc_main$l=defineComponent({name:"SubMenu",components:{Icon:Icon$1,CollapseTransition:CollapseTransition,Popover:Popover},props:{name:{type:[String,Number],required:!0},disabled:propTypes.bool,collapsedShowTitle:propTypes.bool},setup(props){var _a;const instance=getCurrentInstance(),state=reactive({active:!1,opened:!1}),data=reactive({timeout:null,mouseInChild:!1,isChild:!1}),{getParentSubMenu:getParentSubMenu,getItemStyle:getItemStyle,getParentMenu:getParentMenu,getParentList:getParentList}=useMenuItem(instance),{prefixCls:prefixCls}=useDesign("menu"),subMenuEmitter=mitt(),{rootMenuEmitter:rootMenuEmitter}=useSimpleRootMenuContext(),{addSubMenu:parentAddSubmenu,removeSubMenu:parentRemoveSubmenu,removeAll:parentRemoveAll,getOpenNames:parentGetOpenNames,isRemoveAllPopup:isRemoveAllPopup,sliceIndex:sliceIndex,level:level,props:rootProps,handleMouseleave:parentHandleMouseleave}=inject(`subMenu:${null==(_a=getParentMenu.value)?void 0:_a.uid}`),getClass=computed((()=>[`${prefixCls}-submenu`,{[`${prefixCls}-item-active`]:state.active,[`${prefixCls}-opened`]:state.opened,[`${prefixCls}-submenu-disabled`]:props.disabled,[`${prefixCls}-submenu-has-parent-submenu`]:unref(getParentSubMenu),[`${prefixCls}-child-item-active`]:state.active}])),getAccordion=computed((()=>rootProps.accordion)),getCollapse=computed((()=>rootProps.collapse)),getTheme=computed((()=>rootProps.theme)),getOverlayStyle=computed((()=>({minWidth:"200px"}))),getIsOpend=computed((()=>{const name=props.name;return unref(getCollapse)?parentGetOpenNames().includes(name):state.opened})),getSubClass=computed((()=>{const isActive=rootProps.activeSubMenuNames.includes(props.name);return[`${prefixCls}-submenu-title`,{[`${prefixCls}-submenu-active`]:isActive,[`${prefixCls}-submenu-active-border`]:isActive&&0===level,[`${prefixCls}-submenu-collapse`]:unref(getCollapse)&&0===level}]}));function handleMouseenter(){if(props.disabled)return;subMenuEmitter.emit("submenu:mouse-enter-child");const index2=parentGetOpenNames().findIndex((item=>item===props.name));sliceIndex(index2);0===level&&2===parentGetOpenNames().length&&parentRemoveAll(),data.isChild=parentGetOpenNames().includes(props.name),clearTimeout(data.timeout),data.timeout=setTimeout((()=>{parentAddSubmenu(props.name)}),200)}function handleMouseleave(deepDispatch=!1){var _a2;(null==(_a2=getParentMenu.value)?void 0:_a2.props.name)||(isRemoveAllPopup.value=!0),parentGetOpenNames().slice(-1)[0]===props.name&&(data.isChild=!1),subMenuEmitter.emit("submenu:mouse-leave-child"),data.timeout&&(clearTimeout(data.timeout),data.timeout=setTimeout((()=>{isRemoveAllPopup.value?parentRemoveAll():data.mouseInChild||parentRemoveSubmenu(props.name)}),200)),deepDispatch&&getParentSubMenu.value&&(null==parentHandleMouseleave||parentHandleMouseleave(!0))}return onBeforeMount((()=>{subMenuEmitter.on("submenu:mouse-enter-child",(()=>{data.mouseInChild=!0,isRemoveAllPopup.value=!1,clearTimeout(data.timeout)})),subMenuEmitter.on("submenu:mouse-leave-child",(()=>{data.isChild||(data.mouseInChild=!1,clearTimeout(data.timeout))})),rootMenuEmitter.on("on-update-opened",(data2=>{if(!unref(getCollapse))if(isBoolean(data2))state.opened=data2;else if(isObject(data2)&&rootProps.accordion){const{opend:opend,parent:parent,uidList:uidList}=data2;parent===(null==instance?void 0:instance.parent)?state.opened=opend:uidList.includes(null==instance?void 0:instance.uid)||(state.opened=!1)}else props.name&&Array.isArray(data2)&&(state.opened=data2.includes(props.name))})),rootMenuEmitter.on("on-update-active-name:submenu",(data2=>{(null==instance?void 0:instance.uid)&&(state.active=data2.includes(null==instance?void 0:instance.uid))}))})),provide(`subMenu:${null==instance?void 0:instance.uid}`,{addSubMenu:parentAddSubmenu,removeSubMenu:parentRemoveSubmenu,getOpenNames:parentGetOpenNames,removeAll:parentRemoveAll,isRemoveAllPopup:isRemoveAllPopup,sliceIndex:sliceIndex,level:level+1,handleMouseleave:handleMouseleave,props:rootProps}),__spreadValues(__spreadValues({getClass:getClass,prefixCls:prefixCls,getCollapse:getCollapse,getItemStyle:getItemStyle,handleClick:function(){const{disabled:disabled}=props;if(disabled||unref(getCollapse))return;const opened=state.opened;if(unref(getAccordion)){const{uidList:uidList}=getParentList();rootMenuEmitter.emit("on-update-opened",{opend:!1,parent:null==instance?void 0:instance.parent,uidList:uidList})}else rootMenuEmitter.emit("open-name-change",{name:props.name,opened:!opened});state.opened=!opened},handleVisibleChange:function(visible){state.opened=visible},getParentSubMenu:getParentSubMenu,getOverlayStyle:getOverlayStyle,getTheme:getTheme,getIsOpend:getIsOpend,getEvents:function(deep){return unref(getCollapse)?{onMouseenter:handleMouseenter,onMouseleave:()=>handleMouseleave(deep)}:{}},getSubClass:getSubClass},toRefs(state)),toRefs(data))}});const _sfc_main$k=defineComponent({name:"SimpleSubMenu",components:{PluginIcon:_sfc_main$s,SubMenu:_export_sfc(_sfc_main$l,[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_Icon=resolveComponent("Icon"),_component_CollapseTransition=resolveComponent("CollapseTransition"),_component_Popover=resolveComponent("Popover");return openBlock(),createElementBlock("li",{class:normalizeClass(_ctx.getClass)},[_ctx.getCollapse?(openBlock(),createBlock(_component_Popover,{key:1,placement:"right",overlayClassName:`${_ctx.prefixCls}-menu-popover`,visible:_ctx.getIsOpend,onVisibleChange:_ctx.handleVisibleChange,overlayStyle:_ctx.getOverlayStyle,align:{offset:[0,0]}},{content:withCtx((()=>[createBaseVNode("div",normalizeProps(guardReactiveProps(_ctx.getEvents(!0))),[createBaseVNode("ul",{class:normalizeClass([_ctx.prefixCls,`${_ctx.prefixCls}-${_ctx.getTheme}`,`${_ctx.prefixCls}-popup`])},[renderSlot(_ctx.$slots,"default")],2)],16)])),default:withCtx((()=>[createBaseVNode("div",mergeProps({class:_ctx.getSubClass},_ctx.getEvents(!1)),[createBaseVNode("div",{class:normalizeClass([{[`${_ctx.prefixCls}-submenu-popup`]:!_ctx.getParentSubMenu,[`${_ctx.prefixCls}-submenu-collapsed-show-tit`]:_ctx.collapsedShowTitle}])},[renderSlot(_ctx.$slots,"title")],2),_ctx.getParentSubMenu?(openBlock(),createBlock(_component_Icon,{key:0,icon:"eva:arrow-ios-downward-outline",size:14,class:normalizeClass(`${_ctx.prefixCls}-submenu-title-icon`)},null,8,["class"])):createCommentVNode("",!0)],16)])),_:3},8,["overlayClassName","visible","onVisibleChange","overlayStyle"])):(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",{class:normalizeClass(`${_ctx.prefixCls}-submenu-title`),onClick:_cache[0]||(_cache[0]=withModifiers(((...args)=>_ctx.handleClick&&_ctx.handleClick(...args)),["stop"])),style:normalizeStyle(_ctx.getItemStyle)},[renderSlot(_ctx.$slots,"title"),createVNode(_component_Icon,{icon:"eva:arrow-ios-downward-outline",size:14,class:normalizeClass(`${_ctx.prefixCls}-submenu-title-icon`)},null,8,["class"])],6),createVNode(_component_CollapseTransition,null,{default:withCtx((()=>[withDirectives(createBaseVNode("ul",{class:normalizeClass(_ctx.prefixCls)},[renderSlot(_ctx.$slots,"default")],2),[[vShow,_ctx.opened]])])),_:3})],64))],2)}]]),MenuItem:MenuItem,SimpleMenuTag:createAsyncComponent((()=>__vitePreload((()=>Promise.resolve().then((()=>SimpleMenuTag$1))),void 0))),Icon:Icon$1},props:{item:{type:Object,default:()=>({})},parent:propTypes.bool,collapsedShowTitle:propTypes.bool,collapse:propTypes.bool,theme:propTypes.oneOf(["dark","light"])},setup(props){const{t:t2}=useI18n(),{prefixCls:prefixCls}=useDesign("simple-menu"),getShowMenu=computed((()=>{var _a,_b;return!(null==(_b=null==(_a=props.item)?void 0:_a.meta)?void 0:_b.hideMenu)})),getIcon=computed((()=>{var _a;return null==(_a=props.item)?void 0:_a.icon})),getI18nName=computed((()=>{var _a;return t2(null==(_a=props.item)?void 0:_a.name)})),getShowSubTitle=computed((()=>!props.collapse||!props.parent)),getIsCollapseParent=computed((()=>!!props.collapse&&!!props.parent)),getLevelClass=computed((()=>[{[`${prefixCls}__parent`]:props.parent,[`${prefixCls}__children`]:!props.parent}]));return{prefixCls:prefixCls,menuHasChildren:function(menuTreeItem){var _a;return!(null==(_a=menuTreeItem.meta)?void 0:_a.hideChildrenInMenu)&&Reflect.has(menuTreeItem,"children")&&!!menuTreeItem.children&&menuTreeItem.children.length>0},getShowMenu:getShowMenu,getIcon:getIcon,getI18nName:getI18nName,getShowSubTitle:getShowSubTitle,getLevelClass:getLevelClass,getIsCollapseParent:getIsCollapseParent}}}),_hoisted_1$3={key:2,class:"mt-1 collapse-title"},_hoisted_2={key:2,class:"mt-2 collapse-title"};const SimpleMenu=_export_sfc(defineComponent({name:"SimpleMenu",components:{Menu:Menu,SimpleSubMenu:_export_sfc(_sfc_main$k,[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_PluginIcon=resolveComponent("PluginIcon"),_component_Icon=resolveComponent("Icon"),_component_SimpleMenuTag=resolveComponent("SimpleMenuTag"),_component_MenuItem=resolveComponent("MenuItem"),_component_SimpleSubMenu=resolveComponent("SimpleSubMenu",!0),_component_SubMenu=resolveComponent("SubMenu");return openBlock(),createElementBlock(Fragment,null,[!_ctx.menuHasChildren(_ctx.item)&&_ctx.getShowMenu?(openBlock(),createBlock(_component_MenuItem,mergeProps({key:0,name:_ctx.item.path},_ctx.$props,{class:_ctx.getLevelClass}),{title:withCtx((()=>[createBaseVNode("span",{class:normalizeClass(["ml-2",`${_ctx.prefixCls}-sub-title`])},toDisplayString(_ctx.getI18nName),3),createVNode(_component_SimpleMenuTag,{item:_ctx.item,collapseParent:_ctx.getIsCollapseParent},null,8,["item","collapseParent"])])),default:withCtx((()=>{var _a,_b;return[(null==(_a=_ctx.item.guobaMeta)?void 0:_a.plugin)?(openBlock(),createBlock(_component_PluginIcon,{key:0,plugin:null==(_b=_ctx.item.guobaMeta)?void 0:_b.plugin,size:16},null,8,["plugin"])):_ctx.getIcon?(openBlock(),createBlock(_component_Icon,{key:1,icon:_ctx.getIcon,size:16},null,8,["icon"])):createCommentVNode("",!0),_ctx.collapsedShowTitle&&_ctx.getIsCollapseParent?(openBlock(),createElementBlock("div",_hoisted_1$3,toDisplayString(_ctx.getI18nName),1)):createCommentVNode("",!0)]})),_:1},16,["name","class"])):createCommentVNode("",!0),_ctx.menuHasChildren(_ctx.item)&&_ctx.getShowMenu?(openBlock(),createBlock(_component_SubMenu,{key:1,name:_ctx.item.path,class:normalizeClass([_ctx.getLevelClass,_ctx.theme]),collapsedShowTitle:_ctx.collapsedShowTitle},{title:withCtx((()=>{var _a,_b;return[(null==(_a=_ctx.item.guobaMeta)?void 0:_a.plugin)?(openBlock(),createBlock(_component_PluginIcon,{key:0,plugin:null==(_b=_ctx.item.guobaMeta)?void 0:_b.plugin,size:16},null,8,["plugin"])):_ctx.getIcon?(openBlock(),createBlock(_component_Icon,{key:1,icon:_ctx.getIcon,size:16},null,8,["icon"])):createCommentVNode("",!0),_ctx.collapsedShowTitle&&_ctx.getIsCollapseParent?(openBlock(),createElementBlock("div",_hoisted_2,toDisplayString(_ctx.getI18nName),1)):createCommentVNode("",!0),withDirectives(createBaseVNode("span",{class:normalizeClass(["ml-2",`${_ctx.prefixCls}-sub-title`])},toDisplayString(_ctx.getI18nName),3),[[vShow,_ctx.getShowSubTitle]]),createVNode(_component_SimpleMenuTag,{item:_ctx.item,collapseParent:!!_ctx.collapse&&!!_ctx.parent},null,8,["item","collapseParent"])]})),default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(_ctx.item.children||[],(childrenItem=>(openBlock(),createBlock(_component_SimpleSubMenu,mergeProps({key:childrenItem.paramPath||childrenItem.path},_ctx.$props,{item:childrenItem,parent:!1}),null,16,["item"])))),128))])),_:1},8,["name","class","collapsedShowTitle"])):createCommentVNode("",!0)],64)}]])},inheritAttrs:!1,props:{items:{type:Array,default:()=>[]},collapse:propTypes.bool,mixSider:propTypes.bool,theme:propTypes.string,accordion:propTypes.bool.def(!0),collapsedShowTitle:propTypes.bool,beforeClickFn:{type:Function},isSplitMenu:propTypes.bool},emits:["menuClick"],setup(props,{attrs:attrs,emit:emit}){const currentActiveMenu=ref(""),isClickGo=ref(!1),menuState=reactive({activeName:"",openNames:[],activeSubMenuNames:[]}),{currentRoute:currentRoute}=useRouter(),{prefixCls:prefixCls}=useDesign("simple-menu"),{items:items,accordion:accordion,mixSider:mixSider,collapse:collapse}=toRefs(props),{setOpenKeys:setOpenKeys,getOpenKeys:getOpenKeys}=function(menuState,menus,accordion,mixSider,collapse){return{setOpenKeys:useDebounceFn((function(path){return __async(this,null,(function*(){const native=!mixSider.value,menuList=toRaw(menus.value);useTimeoutFn((()=>{if(0===(null==menuList?void 0:menuList.length))return menuState.activeSubMenuNames=[],void(menuState.openNames=[]);const keys=getAllParentPath(menuList,path);unref(accordion)?menuState.openNames=keys:menuState.openNames=uniq([...menuState.openNames,...keys]),menuState.activeSubMenuNames=menuState.openNames}),30,native)}))}),50),getOpenKeys:computed((()=>unref(collapse)?[]:menuState.openNames))}}(menuState,items,accordion,mixSider,collapse),getBindValues=computed((()=>__spreadValues(__spreadValues({},attrs),props)));return watch((()=>props.collapse),(collapse2=>{collapse2?menuState.openNames=[]:setOpenKeys(currentRoute.value.path)}),{immediate:!0}),watch((()=>props.items),(()=>{props.isSplitMenu&&setOpenKeys(currentRoute.value.path)}),{flush:"post"}),listenerRouteChange((route=>{var _a;route.name!==REDIRECT_NAME&&(currentActiveMenu.value=null==(_a=route.meta)?void 0:_a.currentActiveMenu,function(route){__async(this,null,(function*(){if(unref(isClickGo))return void(isClickGo.value=!1);const path=(route||unref(currentRoute)).path;menuState.activeName=path,setOpenKeys(path)}))}(route),unref(currentActiveMenu)&&(menuState.activeName=unref(currentActiveMenu),setOpenKeys(unref(currentActiveMenu))))})),__spreadValues({prefixCls:prefixCls,getBindValues:getBindValues,handleSelect:function(key2){return __async(this,null,(function*(){if(isUrl(key2))return void openWindow(key2);const{beforeClickFn:beforeClickFn}=props;if(beforeClickFn&&isFunction(beforeClickFn)){if(!(yield beforeClickFn(key2)))return}emit("menuClick",key2),isClickGo.value=!0,setOpenKeys(key2),menuState.activeName=key2}))},getOpenKeys:getOpenKeys},toRefs(menuState))}}),[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_SimpleSubMenu=resolveComponent("SimpleSubMenu"),_component_Menu=resolveComponent("Menu");return openBlock(),createBlock(_component_Menu,mergeProps(_ctx.getBindValues,{activeName:_ctx.activeName,openNames:_ctx.getOpenKeys,class:_ctx.prefixCls,activeSubMenuNames:_ctx.activeSubMenuNames,onSelect:_ctx.handleSelect}),{default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(_ctx.items,(item=>(openBlock(),createBlock(_component_SimpleSubMenu,{key:item.path,item:item,parent:!0,collapsedShowTitle:_ctx.collapsedShowTitle,collapse:_ctx.collapse},null,8,["item","collapsedShowTitle","collapse"])))),128))])),_:1},16,["activeName","openNames","class","activeSubMenuNames","onSelect"])}]]);const SimpleMenuTag=_export_sfc(defineComponent({name:"SimpleMenuTag",props:{item:{type:Object,default:()=>({})},dot:propTypes.bool,collapseParent:propTypes.bool},setup(props){const{prefixCls:prefixCls}=useDesign("simple-menu"),getShowTag=computed((()=>{const{item:item}=props;if(!item)return!1;const{tag:tag}=item;if(!tag)return!1;const{dot:dot,content:content}=tag;return!(!dot&&!content)})),getContent=computed((()=>{if(!getShowTag.value)return"";const{item:item,collapseParent:collapseParent}=props,{tag:tag}=item,{dot:dot,content:content}=tag;return dot||collapseParent?"":content}));return{getTagClass:computed((()=>{const{item:item,collapseParent:collapseParent}=props,{tag:tag={}}=item||{},{dot:dot,type:type="error"}=tag,tagCls=`${prefixCls}-tag`;return[tagCls,[`${tagCls}--${type}`],{[`${tagCls}--collapse`]:collapseParent,[`${tagCls}--dot`]:dot||props.dot}]})),getShowTag:getShowTag,getContent:getContent}}}),[["render",function(_ctx,_cache,$props,$setup,$data,$options){return _ctx.getShowTag?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(_ctx.getTagClass)},toDisplayString(_ctx.getContent),3)):createCommentVNode("",!0)}]]),SimpleMenuTag$1=Object.freeze(Object.defineProperty({__proto__:null,default:SimpleMenuTag},Symbol.toStringTag,{value:"Module"}));const _sfc_main$h=defineComponent({name:"LayoutMenu",props:{theme:propTypes.oneOf(["light","dark"]),splitType:{type:Number,default:MenuSplitTyeEnum.NONE},isHorizontal:propTypes.bool,menuMode:{type:[String],default:""}},setup(props){const go=useGo(),{getMenuMode:getMenuMode,getMenuType:getMenuType,getMenuTheme:getMenuTheme,getCollapsed:getCollapsed,getCollapsedShowTitle:getCollapsedShowTitle,getAccordion:getAccordion,getIsHorizontal:getIsHorizontal,getIsSidebarType:getIsSidebarType,getSplit:getSplit}=useMenuSetting(),{getShowLogo:getShowLogo}=useRootSetting(),{prefixCls:prefixCls}=useDesign("layout-menu"),{menusRef:menusRef}=function(splitType){const menusRef=ref([]),{currentRoute:currentRoute}=useRouter(),{getIsMobile:getIsMobile}=useAppInject(),permissionStore=usePermissionStore(),{setMenuSetting:setMenuSetting,getIsHorizontal:getIsHorizontal,getSplit:getSplit}=useMenuSetting(),throttleHandleSplitLeftMenu=useThrottleFn((function(parentPath){return __async(this,null,(function*(){if(unref(getSplitLeft)||unref(getIsMobile))return;const children=yield getChildrenMenus(parentPath);if(!children||!children.length)return setMenuSetting({hidden:!0}),void(menusRef.value=[]);setMenuSetting({hidden:!1}),menusRef.value=children}))}),50),splitNotLeft=computed((()=>unref(splitType)!==MenuSplitTyeEnum.LEFT&&!unref(getIsHorizontal))),getSplitLeft=computed((()=>!unref(getSplit)||unref(splitType)!==MenuSplitTyeEnum.LEFT)),getSpiltTop=computed((()=>unref(splitType)===MenuSplitTyeEnum.TOP)),normalType=computed((()=>unref(splitType)===MenuSplitTyeEnum.NONE||!unref(getSplit)));function genMenus(){return __async(this,null,(function*(){if(unref(normalType)||unref(getIsMobile))menusRef.value=yield getMenus();else if(unref(getSpiltTop)){const shallowMenus=yield getShallowMenus();menusRef.value=shallowMenus}}))}return watch([()=>unref(currentRoute).path,()=>unref(splitType)],(_0=>__async(this,[_0],(function*([path]){if(unref(splitNotLeft)||unref(getIsMobile))return;const{meta:meta}=unref(currentRoute),currentActiveMenu=meta.currentActiveMenu;let parentPath=yield getCurrentParentPath(path);parentPath||(parentPath=yield getCurrentParentPath(currentActiveMenu)),parentPath&&throttleHandleSplitLeftMenu(parentPath)}))),{immediate:!0}),watch([()=>permissionStore.getLastBuildMenuTime,()=>permissionStore.getBackMenuList],(()=>{genMenus()}),{immediate:!0}),watch((()=>getSplit.value),(()=>{unref(splitNotLeft)||genMenus()})),{menusRef:menusRef}}(toRef(props,"splitType")),{getIsMobile:getIsMobile}=useAppInject(),getComputedMenuMode=computed((()=>unref(getIsMobile)?MenuModeEnum.INLINE:props.menuMode||unref(getMenuMode))),getComputedMenuTheme=computed((()=>props.theme||unref(getMenuTheme))),getIsShowLogo=computed((()=>unref(getShowLogo)&&unref(getIsSidebarType))),getUseScroll=computed((()=>!unref(getIsHorizontal)&&(unref(getIsSidebarType)||props.splitType===MenuSplitTyeEnum.LEFT||props.splitType===MenuSplitTyeEnum.NONE))),getWrapperStyle=computed((()=>({height:`calc(100% - ${unref(getIsShowLogo)?"48px":"0px"})`}))),getLogoClass=computed((()=>[`${prefixCls}-logo`,unref(getComputedMenuTheme),{[`${prefixCls}--mobile`]:unref(getIsMobile)}])),getCommonProps=computed((()=>{const menus=unref(menusRef);return{menus:menus,beforeClickFn:beforeMenuClickFn,items:menus,theme:unref(getComputedMenuTheme),accordion:unref(getAccordion),collapse:unref(getCollapsed),collapsedShowTitle:unref(getCollapsedShowTitle),onMenuClick:handleMenuClick}}));function handleMenuClick(path){go(path)}function beforeMenuClickFn(path){return __async(this,null,(function*(){return!isUrl(path)||(openWindow(path),!1)}))}function renderMenu(){const _a=unref(getCommonProps),{menus:menus}=_a,menuProps=((source,exclude)=>{var target={};for(var prop in source)__hasOwnProp.call(source,prop)&&exclude.indexOf(prop)<0&&(target[prop]=source[prop]);if(null!=source&&__getOwnPropSymbols)for(var prop of __getOwnPropSymbols(source))exclude.indexOf(prop)<0&&__propIsEnum.call(source,prop)&&(target[prop]=source[prop]);return target})(_a,["menus"]);return menus&&menus.length?props.isHorizontal?createVNode(BasicMenu,mergeProps(menuProps,{isHorizontal:props.isHorizontal,type:unref(getMenuType),showLogo:unref(getIsShowLogo),mode:unref(getComputedMenuMode),items:menus}),null):createVNode(SimpleMenu,mergeProps(menuProps,{isSplitMenu:unref(getSplit),items:menus}),null):null}return()=>createVNode(Fragment,null,[unref(getIsShowLogo)||unref(getIsMobile)?createVNode(AppLogo,{showTitle:!unref(getCollapsed),class:unref(getLogoClass),theme:unref(getComputedMenuTheme)},null):null,unref(getUseScroll)?createVNode(ScrollContainer,{style:unref(getWrapperStyle)},{default:()=>renderMenu()}):renderMenu()])}});const HeaderTrigger=_export_sfc(defineComponent({name:"HeaderTrigger",components:{MenuUnfoldOutlined:MenuUnfoldOutlined,MenuFoldOutlined:MenuFoldOutlined},props:{theme:propTypes.oneOf(["light","dark"])},setup(){const{getCollapsed:getCollapsed,toggleCollapsed:toggleCollapsed}=useMenuSetting(),{prefixCls:prefixCls}=useDesign("layout-header-trigger");return{getCollapsed:getCollapsed,toggleCollapsed:toggleCollapsed,prefixCls:prefixCls}}}),[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_MenuUnfoldOutlined=resolveComponent("MenuUnfoldOutlined"),_component_MenuFoldOutlined=resolveComponent("MenuFoldOutlined");return openBlock(),createElementBlock("span",{class:normalizeClass([_ctx.prefixCls,_ctx.theme]),onClick:_cache[0]||(_cache[0]=(...args)=>_ctx.toggleCollapsed&&_ctx.toggleCollapsed(...args))},[_ctx.getCollapsed?(openBlock(),createBlock(_component_MenuUnfoldOutlined,{key:0})):(openBlock(),createBlock(_component_MenuFoldOutlined,{key:1}))],2)}]]);const LayoutTrigger=_export_sfc(defineComponent({name:"LayoutTrigger",components:{SiderTrigger:createAsyncComponent((()=>__vitePreload((()=>import("./SiderTrigger.js")),__vite__mapDeps([0,1,2])))),HeaderTrigger:HeaderTrigger},props:{sider:propTypes.bool.def(!0),theme:propTypes.oneOf(["light","dark"])}}),[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_SiderTrigger=resolveComponent("SiderTrigger"),_component_HeaderTrigger=resolveComponent("HeaderTrigger");return _ctx.sider?(openBlock(),createBlock(_component_SiderTrigger,{key:0})):(openBlock(),createBlock(_component_HeaderTrigger,{key:1,theme:_ctx.theme},null,8,["theme"]))}]]);function useHeaderSetting(){const{getFullContent:getFullContent}=useFullContent(),appStore=useAppStore(),getShowFullHeaderRef=computed((()=>!unref(getFullContent)&&unref(getShowMixHeaderRef)&&unref(getShowHeader)&&!unref(getIsTopMenu)&&!unref(getIsMixSidebar))),getUnFixedAndFull=computed((()=>!unref(getFixed)&&!unref(getShowFullHeaderRef))),getShowInsetHeaderRef=computed((()=>{const need=!unref(getFullContent)&&unref(getShowHeader);return need&&!unref(getShowMixHeaderRef)||need&&unref(getIsTopMenu)||need&&unref(getIsMixSidebar)})),{getMenuMode:getMenuMode,getSplit:getSplit,getShowHeaderTrigger:getShowHeaderTrigger,getIsSidebarType:getIsSidebarType,getIsMixSidebar:getIsMixSidebar,getIsTopMenu:getIsTopMenu}=useMenuSetting(),{getShowBreadCrumb:getShowBreadCrumb,getShowLogo:getShowLogo}=useRootSetting(),getShowMixHeaderRef=computed((()=>!unref(getIsSidebarType)&&unref(getShowHeader))),getShowDoc=computed((()=>appStore.getHeaderSetting.showDoc)),getHeaderTheme=computed((()=>appStore.getHeaderSetting.theme)),getShowHeader=computed((()=>appStore.getHeaderSetting.show)),getFixed=computed((()=>appStore.getHeaderSetting.fixed)),getHeaderBgColor=computed((()=>appStore.getHeaderSetting.bgColor)),getShowSearch=computed((()=>appStore.getHeaderSetting.showSearch)),getUseLockPage=computed((()=>appStore.getHeaderSetting.useLockPage)),getShowFullScreen=computed((()=>appStore.getHeaderSetting.showFullScreen)),getShowNotice=computed((()=>appStore.getHeaderSetting.showNotice)),getShowBread=computed((()=>unref(getMenuMode)!==MenuModeEnum.HORIZONTAL&&unref(getShowBreadCrumb)&&!unref(getSplit))),getShowHeaderLogo=computed((()=>unref(getShowLogo)&&!unref(getIsSidebarType)&&!unref(getIsMixSidebar))),getShowContent=computed((()=>unref(getShowBread)||unref(getShowHeaderTrigger)));return{setHeaderSetting:function(headerSetting){appStore.setProjectConfig({headerSetting:headerSetting})},getShowDoc:getShowDoc,getShowSearch:getShowSearch,getHeaderTheme:getHeaderTheme,getUseLockPage:getUseLockPage,getShowFullScreen:getShowFullScreen,getShowNotice:getShowNotice,getShowBread:getShowBread,getShowContent:getShowContent,getShowHeaderLogo:getShowHeaderLogo,getShowHeader:getShowHeader,getFixed:getFixed,getShowMixHeaderRef:getShowMixHeaderRef,getShowFullHeaderRef:getShowFullHeaderRef,getShowInsetHeaderRef:getShowInsetHeaderRef,getUnFixedAndFull:getUnFixedAndFull,getHeaderBgColor:getHeaderBgColor}}const FullScreen=_export_sfc(defineComponent({name:"FullScreen",components:{FullscreenExitOutlined:FullscreenExitOutlined,FullscreenOutlined:FullscreenOutlined,Tooltip:Tooltip},setup(){const{t:t2}=useI18n(),{toggle:toggle,isFullscreen:isFullscreen}=useFullscreen();return{getTitle:computed((()=>unref(isFullscreen)?t2("layout.header.tooltipExitFull"):t2("layout.header.tooltipEntryFull"))),isFullscreen:isFullscreen,toggle:toggle}}}),[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_FullscreenOutlined=resolveComponent("FullscreenOutlined"),_component_FullscreenExitOutlined=resolveComponent("FullscreenExitOutlined"),_component_Tooltip=resolveComponent("Tooltip");return openBlock(),createBlock(_component_Tooltip,{title:_ctx.getTitle,placement:"bottom",mouseEnterDelay:.5},{default:withCtx((()=>[createBaseVNode("span",{onClick:_cache[0]||(_cache[0]=(...args)=>_ctx.toggle&&_ctx.toggle(...args))},[_ctx.isFullscreen?(openBlock(),createBlock(_component_FullscreenExitOutlined,{key:1})):(openBlock(),createBlock(_component_FullscreenOutlined,{key:0}))])])),_:1},8,["title"])}]]),UserDropDown=createAsyncComponent((()=>__vitePreload((()=>import("./index25.js")),__vite__mapDeps([3,1,2,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21]))),{loading:!0}),LayoutBreadcrumb=createAsyncComponent((()=>__vitePreload((()=>import("./Breadcrumb.js")),__vite__mapDeps([22,1,2,23,24,25]))));createAsyncComponent((()=>__vitePreload((()=>import("./index26.js")),__vite__mapDeps([26,1,2,27,28,29,30,31]))));const ErrorAction=createAsyncComponent((()=>__vitePreload((()=>import("./ErrorAction.js")),__vite__mapDeps([32,1,2,27,28]))));const LayoutHeader=_export_sfc(defineComponent({name:"LayoutHeader",components:{Header:Layout.Header,AppLogo:AppLogo,LayoutTrigger:LayoutTrigger,LayoutBreadcrumb:LayoutBreadcrumb,LayoutMenu:_sfc_main$h,UserDropDown:UserDropDown,FullScreen:FullScreen,AppSearch:AppSearch,ErrorAction:ErrorAction},props:{fixed:propTypes.bool},setup(props){const{prefixCls:prefixCls}=useDesign("layout-header"),{getShowTopMenu:getShowTopMenu,getShowHeaderTrigger:getShowHeaderTrigger,getSplit:getSplit,getIsMixMode:getIsMixMode,getMenuWidth:getMenuWidth,getIsMixSidebar:getIsMixSidebar}=useMenuSetting(),{getUseErrorHandle:getUseErrorHandle,getShowSettingButton:getShowSettingButton,getSettingButtonPosition:getSettingButtonPosition}=useRootSetting(),{getHeaderTheme:getHeaderTheme,getShowFullScreen:getShowFullScreen,getShowNotice:getShowNotice,getShowContent:getShowContent,getShowBread:getShowBread,getShowHeaderLogo:getShowHeaderLogo,getShowHeader:getShowHeader,getShowSearch:getShowSearch}=useHeaderSetting(),{getShowLocalePicker:getShowLocalePicker}=useLocale(),{getIsMobile:getIsMobile}=useAppInject(),getHeaderClass=computed((()=>{const theme=unref(getHeaderTheme);return[prefixCls,{[`${prefixCls}--fixed`]:props.fixed,[`${prefixCls}--mobile`]:unref(getIsMobile),[`${prefixCls}--${theme}`]:theme}]})),getShowSetting=computed((()=>{if(!unref(getShowSettingButton))return!1;const settingButtonPosition=unref(getSettingButtonPosition);return settingButtonPosition===SettingButtonPositionEnum.AUTO?unref(getShowHeader):settingButtonPosition===SettingButtonPositionEnum.HEADER})),getLogoWidth=computed((()=>{if(!unref(getIsMixMode)||unref(getIsMobile))return{};return{width:`${unref(getMenuWidth)<180?180:unref(getMenuWidth)}px`}})),getSplitType=computed((()=>unref(getSplit)?MenuSplitTyeEnum.TOP:MenuSplitTyeEnum.NONE)),getMenuMode=computed((()=>unref(getSplit)?MenuModeEnum.HORIZONTAL:null));return{prefixCls:prefixCls,getHeaderClass:getHeaderClass,getShowHeaderLogo:getShowHeaderLogo,getHeaderTheme:getHeaderTheme,getShowHeaderTrigger:getShowHeaderTrigger,getIsMobile:getIsMobile,getShowBread:getShowBread,getShowContent:getShowContent,getSplitType:getSplitType,getSplit:getSplit,getMenuMode:getMenuMode,getShowTopMenu:getShowTopMenu,getShowLocalePicker:getShowLocalePicker,getShowFullScreen:getShowFullScreen,getShowNotice:getShowNotice,getUseErrorHandle:getUseErrorHandle,getLogoWidth:getLogoWidth,getIsMixSidebar:getIsMixSidebar,getShowSettingButton:getShowSettingButton,getShowSetting:getShowSetting,getShowSearch:getShowSearch}}}),[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_AppLogo=resolveComponent("AppLogo"),_component_LayoutTrigger=resolveComponent("LayoutTrigger"),_component_LayoutBreadcrumb=resolveComponent("LayoutBreadcrumb"),_component_LayoutMenu=resolveComponent("LayoutMenu"),_component_AppSearch=resolveComponent("AppSearch"),_component_ErrorAction=resolveComponent("ErrorAction"),_component_FullScreen=resolveComponent("FullScreen"),_component_UserDropDown=resolveComponent("UserDropDown"),_component_Header=resolveComponent("Header");return openBlock(),createBlock(_component_Header,{class:normalizeClass(_ctx.getHeaderClass)},{default:withCtx((()=>[createBaseVNode("div",{class:normalizeClass(`${_ctx.prefixCls}-left`)},[_ctx.getShowHeaderLogo||_ctx.getIsMobile?(openBlock(),createBlock(_component_AppLogo,{key:0,class:normalizeClass(`${_ctx.prefixCls}-logo`),theme:_ctx.getHeaderTheme,style:normalizeStyle(_ctx.getLogoWidth)},null,8,["class","theme","style"])):createCommentVNode("",!0),_ctx.getShowContent&&_ctx.getShowHeaderTrigger&&!_ctx.getSplit&&!_ctx.getIsMixSidebar||_ctx.getIsMobile?(openBlock(),createBlock(_component_LayoutTrigger,{key:1,theme:_ctx.getHeaderTheme,sider:!1},null,8,["theme"])):createCommentVNode("",!0),_ctx.getShowContent&&_ctx.getShowBread?(openBlock(),createBlock(_component_LayoutBreadcrumb,{key:2,theme:_ctx.getHeaderTheme},null,8,["theme"])):createCommentVNode("",!0)],2),_ctx.getShowTopMenu&&!_ctx.getIsMobile?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${_ctx.prefixCls}-menu`)},[createVNode(_component_LayoutMenu,{isHorizontal:!0,theme:_ctx.getHeaderTheme,splitType:_ctx.getSplitType,menuMode:_ctx.getMenuMode},null,8,["theme","splitType","menuMode"])],2)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(`${_ctx.prefixCls}-action`)},[_ctx.getShowSearch?(openBlock(),createBlock(_component_AppSearch,{key:0,class:normalizeClass(`${_ctx.prefixCls}-action__item `)},null,8,["class"])):createCommentVNode("",!0),_ctx.getUseErrorHandle?(openBlock(),createBlock(_component_ErrorAction,{key:1,class:normalizeClass(`${_ctx.prefixCls}-action__item error-action`)},null,8,["class"])):createCommentVNode("",!0),_ctx.getShowFullScreen?(openBlock(),createBlock(_component_FullScreen,{key:2,class:normalizeClass(`${_ctx.prefixCls}-action__item fullscreen-item`)},null,8,["class"])):createCommentVNode("",!0),createVNode(_component_UserDropDown,{theme:_ctx.getHeaderTheme},null,8,["theme"])],2)])),_:1},8,["class"])}]]);function useMultipleTabSetting(){const appStore=useAppStore();return{setMultipleTabSetting:function(multiTabsSetting){appStore.setProjectConfig({multiTabsSetting:multiTabsSetting})},getShowMultipleTab:computed((()=>appStore.getMultiTabsSetting.show)),getShowQuick:computed((()=>appStore.getMultiTabsSetting.showQuick)),getShowRedo:computed((()=>appStore.getMultiTabsSetting.showRedo)),getShowFold:computed((()=>appStore.getMultiTabsSetting.showFold))}}const _sfc_main$c=defineComponent({name:"FrameLayout",components:{FramePage:FramePage},setup(){const{getFramePages:getFramePages,hasRenderFrame:hasRenderFrame,showIframe:showIframe}=function(){const router=useRouter(),{currentRoute:currentRoute}=router,{getShowMultipleTab:getShowMultipleTab}=useMultipleTabSetting(),tabStore=useMultipleTabStore(),getFramePages=computed((()=>getAllFramePages(toRaw(router.getRoutes()))||[])),getOpenTabList=computed((()=>tabStore.getTabList.reduce(((prev,next)=>(next.meta&&Reflect.has(next.meta,"frameSrc")&&prev.push(next.name),prev)),[])));function getAllFramePages(routes){let res=[];for(const route of routes){const{meta:{frameSrc:frameSrc}={},children:children}=route;frameSrc&&res.push(route),children&&children.length&&res.push(...getAllFramePages(children))}return res=uniqBy(res,"name"),res}return{hasRenderFrame:function(name){return unref(getShowMultipleTab)?unref(getOpenTabList).includes(name):router.currentRoute.value.name===name},getFramePages:getFramePages,showIframe:function(item){return item.name===unref(currentRoute).name},getAllFramePages:getAllFramePages}}(),showFrame=computed((()=>unref(getFramePages).length>0));return{getFramePages:getFramePages,hasRenderFrame:hasRenderFrame,showIframe:showIframe,showFrame:showFrame}}}),_hoisted_1$2={key:0};function getTransitionName({route:route,openCache:openCache,cacheTabs:cacheTabs,enableTransition:enableTransition,def:def}){if(!enableTransition)return;const isInCache=cacheTabs.includes(route.name);let name="fade-slide";return openCache&&(name=isInCache&&route.meta.loaded?"fade-slide":void 0),name||route.meta.transitionName||def}const _sfc_main$b=defineComponent({name:"PageLayout",components:{FrameLayout:_export_sfc(_sfc_main$c,[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_FramePage=resolveComponent("FramePage");return _ctx.showFrame?(openBlock(),createElementBlock("div",_hoisted_1$2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(_ctx.getFramePages,(frame=>(openBlock(),createElementBlock(Fragment,{key:frame.path},[frame.meta.frameSrc&&_ctx.hasRenderFrame(frame.name)?withDirectives((openBlock(),createBlock(_component_FramePage,{key:0,frameSrc:frame.meta.frameSrc},null,8,["frameSrc"])),[[vShow,_ctx.showIframe(frame)]]):createCommentVNode("",!0)],64)))),128))])):createCommentVNode("",!0)}]])},setup(){const{getShowMultipleTab:getShowMultipleTab}=useMultipleTabSetting(),tabStore=useMultipleTabStore(),{getOpenKeepAlive:getOpenKeepAlive,getCanEmbedIFramePage:getCanEmbedIFramePage}=useRootSetting(),{getBasicTransition:getBasicTransition,getEnableTransition:getEnableTransition}=useTransitionSetting();return{getTransitionName:getTransitionName,openCache:computed((()=>unref(getOpenKeepAlive)&&unref(getShowMultipleTab))),getEnableTransition:getEnableTransition,getBasicTransition:getBasicTransition,getCaches:computed((()=>unref(getOpenKeepAlive)?tabStore.getCachedTabList:[])),getCanEmbedIFramePage:getCanEmbedIFramePage}}});const LayoutContent=_export_sfc(defineComponent({name:"LayoutContent",components:{PageLayout:_export_sfc(_sfc_main$b,[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_RouterView=resolveComponent("RouterView"),_component_FrameLayout=resolveComponent("FrameLayout");return openBlock(),createElementBlock(Fragment,null,[createVNode(_component_RouterView,null,{default:withCtx((({Component:Component,route:route})=>[createVNode(Transition,{name:_ctx.getTransitionName({route:route,openCache:_ctx.openCache,enableTransition:_ctx.getEnableTransition,cacheTabs:_ctx.getCaches,def:_ctx.getBasicTransition}),mode:"out-in",appear:""},{default:withCtx((()=>[_ctx.openCache?(openBlock(),createBlock(KeepAlive,{key:0,include:_ctx.getCaches},[(openBlock(),createBlock(resolveDynamicComponent(Component),{key:route.fullPath}))],1032,["include"])):(openBlock(),createElementBlock("div",{key:route.name},[(openBlock(),createBlock(resolveDynamicComponent(Component),{key:route.fullPath}))]))])),_:2},1032,["name"])])),_:1}),_ctx.getCanEmbedIFramePage?(openBlock(),createBlock(_component_FrameLayout,{key:0})):createCommentVNode("",!0)],64)}]])},setup(){const{prefixCls:prefixCls}=useDesign("layout-content"),{getOpenPageLoading:getOpenPageLoading}=useTransitionSetting(),{getLayoutContentMode:getLayoutContentMode,getPageLoading:getPageLoading}=useRootSetting();return useContentViewHeight(),{prefixCls:prefixCls,getOpenPageLoading:getOpenPageLoading,getLayoutContentMode:getLayoutContentMode,getPageLoading:getPageLoading}}}),[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_PageLayout=resolveComponent("PageLayout"),_directive_loading=resolveDirective("loading");return withDirectives((openBlock(),createElementBlock("div",{class:normalizeClass([_ctx.prefixCls,_ctx.getLayoutContentMode])},[createVNode(_component_PageLayout)],2)),[[_directive_loading,_ctx.getOpenPageLoading&&_ctx.getPageLoading]])}]]);function useDragLine(siderRef,dragBarRef,mix=!1){const{getMiniWidthNumber:getMiniWidthNumber,getCollapsed:getCollapsed,setMenuSetting:setMenuSetting}=useMenuSetting();function getEl(elRef){var _a;const el=unref(elRef);return el?Reflect.has(el,"$el")?null==(_a=unref(elRef))?void 0:_a.$el:unref(elRef):null}function changeWrapWidth(){const ele=getEl(dragBarRef);if(!ele)return;const wrap=getEl(siderRef);wrap&&(ele.onmousedown=e=>{var _a;wrap.style.transition="unset";const clientX=null==e?void 0:e.clientX;return ele.left=ele.offsetLeft,function(ele,wrap,clientX){document.onmousemove=function(innerE){let iT=ele.left+(innerE.clientX-clientX);innerE=innerE||window.event;const minT=unref(getMiniWidthNumber);return iT<0&&(iT=0),iT>800&&(iT=800),iT<minT&&(iT=minT),ele.style.left=wrap.style.width=iT+"px",!1}}(ele,wrap,clientX),function(ele){const wrap=getEl(siderRef);document.onmouseup=function(){var _a;document.onmousemove=null,document.onmouseup=null,wrap.style.transition="width 0.2s";const width=parseInt(wrap.style.width);if(mix)setMenuSetting({menuWidth:width});else{const miniWidth=unref(getMiniWidthNumber);unref(getCollapsed)?width>miniWidth&&setMenuSetting({collapsed:!1,menuWidth:width}):setMenuSetting(width>miniWidth+20?{menuWidth:width}:{collapsed:!0})}null==(_a=ele.releaseCapture)||_a.call(ele)}}(ele),null==(_a=ele.setCapture)||_a.call(ele),!1})}return onMounted((()=>{nextTick((()=>{useDebounceFn(changeWrapWidth,80)()}))})),{}}const DragBar=_export_sfc(defineComponent({name:"DargBar",props:{mobile:Boolean},setup(props){const{getMiniWidthNumber:getMiniWidthNumber,getCollapsed:getCollapsed,getCanDrag:getCanDrag}=useMenuSetting(),{prefixCls:prefixCls}=useDesign("darg-bar"),getDragBarStyle=computed((()=>unref(getCollapsed)?{left:`${unref(getMiniWidthNumber)}px`}:{})),getClass=computed((()=>[prefixCls,{[`${prefixCls}--hide`]:!unref(getCanDrag)||props.mobile}]));return{prefixCls:prefixCls,getDragBarStyle:getDragBarStyle,getClass:getClass}}}),[["render",function(_ctx,_cache,$props,$setup,$data,$options){return openBlock(),createElementBlock("div",{class:normalizeClass(_ctx.getClass),style:normalizeStyle(_ctx.getDragBarStyle)},null,6)}],["__scopeId","data-v-479c5c84"]]);const Sider=_export_sfc(defineComponent({name:"LayoutSideBar",components:{Sider:Layout.Sider,LayoutMenu:_sfc_main$h,DragBar:DragBar,LayoutTrigger:LayoutTrigger},setup(){const dragBarRef=ref(null),sideRef=ref(null),{getCollapsed:getCollapsed,getMenuWidth:getMenuWidth,getSplit:getSplit,getMenuTheme:getMenuTheme,getRealWidth:getRealWidth,getMenuHidden:getMenuHidden,getMenuFixed:getMenuFixed,getIsMixMode:getIsMixMode,toggleCollapsed:toggleCollapsed}=useMenuSetting(),{prefixCls:prefixCls}=useDesign("layout-sideBar"),{getIsMobile:getIsMobile}=useAppInject(),{getTriggerAttr:getTriggerAttr,getShowTrigger:getShowTrigger}=function(getIsMobile){const{getTrigger:getTrigger,getSplit:getSplit}=useMenuSetting(),getShowTrigger=computed((()=>{const trigger=unref(getTrigger);return trigger!==TriggerEnum.NONE&&!unref(getIsMobile)&&(trigger===TriggerEnum.FOOTER||unref(getSplit))}));return{getTriggerAttr:computed((()=>unref(getShowTrigger)?{}:{trigger:null})),getShowTrigger:getShowTrigger}}(getIsMobile);useDragLine(sideRef,dragBarRef);const{getCollapsedWidth:getCollapsedWidth,onBreakpointChange:onBreakpointChange}=function(){const appStore=useAppStore(),{getMiniWidthNumber:getMiniWidthNumber}=useMenuSetting();return{getCollapsedWidth:computed((()=>unref(getMiniWidthNumber))),onBreakpointChange:function(broken){appStore.setProjectConfig({menuSetting:{siderHidden:broken}})}}}(),getMode=computed((()=>unref(getSplit)?MenuModeEnum.INLINE:null)),getSplitType=computed((()=>unref(getSplit)?MenuSplitTyeEnum.LEFT:MenuSplitTyeEnum.NONE)),showClassSideBarRef=computed((()=>!unref(getSplit)||!unref(getMenuHidden))),getSiderClass=computed((()=>[prefixCls,{[`${prefixCls}--fixed`]:unref(getMenuFixed),[`${prefixCls}--mix`]:unref(getIsMixMode)&&!unref(getIsMobile)}])),getHiddenDomStyle=computed((()=>{const width=`${unref(getRealWidth)}px`;return{width:width,overflow:"hidden",flex:`0 0 ${width}`,maxWidth:width,minWidth:width,transition:"all 0.2s"}})),getTrigger=h(LayoutTrigger);return{prefixCls:prefixCls,sideRef:sideRef,dragBarRef:dragBarRef,getIsMobile:getIsMobile,getHiddenDomStyle:getHiddenDomStyle,getSiderClass:getSiderClass,getTrigger:getTrigger,getTriggerAttr:getTriggerAttr,getCollapsedWidth:getCollapsedWidth,getMenuFixed:getMenuFixed,showClassSideBarRef:showClassSideBarRef,getMenuWidth:getMenuWidth,getCollapsed:getCollapsed,getMenuTheme:getMenuTheme,onBreakpointChange:onBreakpointChange,getMode:getMode,getSplitType:getSplitType,getShowTrigger:getShowTrigger,toggleCollapsed:toggleCollapsed}}}),[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_LayoutTrigger=resolveComponent("LayoutTrigger"),_component_LayoutMenu=resolveComponent("LayoutMenu"),_component_DragBar=resolveComponent("DragBar"),_component_Sider=resolveComponent("Sider");return openBlock(),createElementBlock(Fragment,null,[_ctx.getMenuFixed&&!_ctx.getIsMobile?withDirectives((openBlock(),createElementBlock("div",{key:0,style:normalizeStyle(_ctx.getHiddenDomStyle)},null,4)),[[vShow,_ctx.showClassSideBarRef]]):createCommentVNode("",!0),withDirectives(createVNode(_component_Sider,mergeProps({ref:"sideRef",breakpoint:"lg",collapsible:"",class:_ctx.getSiderClass,width:_ctx.getMenuWidth,collapsed:_ctx.getCollapsed,collapsedWidth:_ctx.getCollapsedWidth,theme:_ctx.getMenuTheme,onBreakpoint:_ctx.onBreakpointChange,trigger:_ctx.getTrigger},_ctx.getTriggerAttr),createSlots({default:withCtx((()=>[createVNode(_component_LayoutMenu,{theme:_ctx.getMenuTheme,menuMode:_ctx.getMode,splitType:_ctx.getSplitType},null,8,["theme","menuMode","splitType"]),createVNode(_component_DragBar,{ref:"dragBarRef"},null,512)])),_:2},[_ctx.getShowTrigger?{name:"trigger",fn:withCtx((()=>[createVNode(_component_LayoutTrigger)])),key:"0"}:void 0]),1040,["class","width","collapsed","collapsedWidth","theme","onBreakpoint","trigger"]),[[vShow,_ctx.showClassSideBarRef]])],64)}]]),_sfc_main$7=defineComponent({name:"LayoutMixSider",components:{ScrollContainer:ScrollContainer,AppLogo:AppLogo,SimpleMenu:SimpleMenu,Icon:Icon$1,LayoutTrigger:LayoutTrigger,SimpleMenuTag:SimpleMenuTag},directives:{clickOutside:ClickOutside},setup(){let menuModules=ref([]);const activePath=ref(""),childrenMenus=ref([]),openMenu=ref(!1),dragBarRef=ref(null),sideRef=ref(null),currentRoute=ref(null),{prefixCls:prefixCls}=useDesign("layout-mix-sider"),go=useGo(),{t:t2}=useI18n(),{getMenuWidth:getMenuWidth,getCanDrag:getCanDrag,getCloseMixSidebarOnChange:getCloseMixSidebarOnChange,getMenuTheme:getMenuTheme,getMixSideTrigger:getMixSideTrigger,getRealWidth:getRealWidth,getMixSideFixed:getMixSideFixed,mixSideHasChildren:mixSideHasChildren,setMenuSetting:setMenuSetting,getIsMixSidebar:getIsMixSidebar,getCollapsed:getCollapsed}=useMenuSetting(),{title:title}=useGlobSetting(),permissionStore=usePermissionStore();useDragLine(sideRef,dragBarRef,!0);const getMenuStyle=computed((()=>({width:unref(openMenu)?`${unref(getMenuWidth)}px`:0,left:`${unref(getMixSideWidth)}px`}))),getIsFixed=computed((()=>{mixSideHasChildren.value=unref(childrenMenus).length>0;const isFixed=unref(getMixSideFixed)&&unref(mixSideHasChildren);return isFixed&&(openMenu.value=!0),isFixed})),getMixSideWidth=computed((()=>unref(getCollapsed)?SIDE_BAR_MINI_WIDTH:SIDE_BAR_SHOW_TIT_MINI_WIDTH)),getDomStyle=computed((()=>{const fixedWidth=unref(getIsFixed)?unref(getRealWidth):0;return getWrapCommonStyle(`${unref(getMixSideWidth)+fixedWidth}px`)})),getWrapStyle=computed((()=>getWrapCommonStyle(`${unref(getMixSideWidth)}px`))),getMenuEvents=computed((()=>unref(getMixSideFixed)?{}:{onMouseleave:()=>{setActive(!0),closeMenu()}})),getShowDragBar=computed((()=>unref(getCanDrag)));function getWrapCommonStyle(width){return{width:width,maxWidth:width,minWidth:width,flex:`0 0 ${width}`}}function handleModuleClick(path,hover=!1){return __async(this,null,(function*(){const children=yield getChildrenMenus(path);if(unref(activePath)===path?(hover?unref(openMenu)||(openMenu.value=!0):unref(openMenu)?closeMenu():openMenu.value=!0,unref(openMenu)||setActive()):(openMenu.value=!0,activePath.value=path),!children||0===children.length)return hover||go(path),childrenMenus.value=[],void closeMenu();childrenMenus.value=children}))}function setActive(setChildren=!1){return __async(this,null,(function*(){var _a;const path=null==(_a=currentRoute.value)?void 0:_a.path;if(path&&(activePath.value=yield getCurrentParentPath(path),unref(getIsMixSidebar))){const activeMenu=unref(menuModules).find((item=>item.path===unref(activePath))),p=null==activeMenu?void 0:activeMenu.path;if(p){const children=yield getChildrenMenus(p);setChildren&&(childrenMenus.value=children,unref(getMixSideFixed)&&(openMenu.value=children.length>0)),0===children.length&&(childrenMenus.value=[])}}}))}function closeMenu(){unref(getIsFixed)||(openMenu.value=!1)}return onMounted((()=>__async(this,null,(function*(){menuModules.value=yield getShallowMenus()})))),watch([()=>permissionStore.getLastBuildMenuTime,()=>permissionStore.getBackMenuList],(()=>__async(this,null,(function*(){menuModules.value=yield getShallowMenus()}))),{immediate:!0}),listenerRouteChange((route=>{currentRoute.value=route,setActive(!0),unref(getCloseMixSidebarOnChange)&&closeMenu()})),{t:t2,prefixCls:prefixCls,menuModules:menuModules,handleModuleClick:handleModuleClick,activePath:activePath,childrenMenus:childrenMenus,getShowDragBar:getShowDragBar,handleMenuClick:function(path){go(path)},getMenuStyle:getMenuStyle,handleClickOutside:function(){setActive(!0),closeMenu()},sideRef:sideRef,dragBarRef:dragBarRef,title:title,openMenu:openMenu,getMenuTheme:getMenuTheme,getItemEvents:function(item){return"hover"===unref(getMixSideTrigger)?{onMouseenter:()=>handleModuleClick(item.path,!0),onClick:()=>__async(this,null,(function*(){const children=yield getChildrenMenus(item.path);!item.path||children&&0!==children.length||go(item.path)}))}:{onClick:()=>handleModuleClick(item.path)}},getMenuEvents:getMenuEvents,getDomStyle:getDomStyle,handleFixedMenu:function(){setMenuSetting({mixSideFixed:!unref(getIsFixed)})},getMixSideFixed:getMixSideFixed,getWrapStyle:getWrapStyle,getCollapsed:getCollapsed}}}),_hoisted_1$1={class:"text"};const LayoutSideBar=_export_sfc(defineComponent({name:"SiderWrapper",components:{Sider:Sider,Drawer:Drawer,MixSider:_export_sfc(_sfc_main$7,[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_AppLogo=resolveComponent("AppLogo"),_component_LayoutTrigger=resolveComponent("LayoutTrigger"),_component_SimpleMenuTag=resolveComponent("SimpleMenuTag"),_component_Icon=resolveComponent("Icon"),_component_ScrollContainer=resolveComponent("ScrollContainer"),_component_SimpleMenu=resolveComponent("SimpleMenu"),_directive_click_outside=resolveDirective("click-outside");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",{class:normalizeClass(`${_ctx.prefixCls}-dom`),style:normalizeStyle(_ctx.getDomStyle)},null,6),withDirectives((openBlock(),createElementBlock("div",mergeProps({style:_ctx.getWrapStyle,class:[_ctx.prefixCls,_ctx.getMenuTheme,{open:_ctx.openMenu,mini:_ctx.getCollapsed}]},_ctx.getMenuEvents),[createVNode(_component_AppLogo,{showTitle:!1,class:normalizeClass(`${_ctx.prefixCls}-logo`)},null,8,["class"]),createVNode(_component_LayoutTrigger,{class:normalizeClass(`${_ctx.prefixCls}-trigger`)},null,8,["class"]),createVNode(_component_ScrollContainer,null,{default:withCtx((()=>[createBaseVNode("ul",{class:normalizeClass(`${_ctx.prefixCls}-module`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(_ctx.menuModules,(item=>(openBlock(),createElementBlock("li",mergeProps({class:[`${_ctx.prefixCls}-module__item `,{[`${_ctx.prefixCls}-module__item--active`]:item.path===_ctx.activePath}]},_ctx.getItemEvents(item),{key:item.path}),[createVNode(_component_SimpleMenuTag,{item:item,collapseParent:"",dot:""},null,8,["item"]),createVNode(_component_Icon,{class:normalizeClass(`${_ctx.prefixCls}-module__icon`),size:_ctx.getCollapsed?16:20,icon:item.icon||item.meta&&item.meta.icon},null,8,["class","size","icon"]),createBaseVNode("p",{class:normalizeClass(`${_ctx.prefixCls}-module__name`)},toDisplayString(_ctx.t(item.name)),3)],16)))),128))],2)])),_:1}),createBaseVNode("div",{class:normalizeClass(`${_ctx.prefixCls}-menu-list`),ref:"sideRef",style:normalizeStyle(_ctx.getMenuStyle)},[withDirectives(createBaseVNode("div",{class:normalizeClass([`${_ctx.prefixCls}-menu-list__title`,{show:_ctx.openMenu}])},[createBaseVNode("span",_hoisted_1$1,toDisplayString(_ctx.title),1),createVNode(_component_Icon,{size:16,icon:_ctx.getMixSideFixed?"ri:pushpin-2-fill":"ri:pushpin-2-line",class:"pushpin",onClick:_ctx.handleFixedMenu},null,8,["icon","onClick"])],2),[[vShow,_ctx.openMenu]]),createVNode(_component_ScrollContainer,{class:normalizeClass(`${_ctx.prefixCls}-menu-list__content`)},{default:withCtx((()=>[createVNode(_component_SimpleMenu,{items:_ctx.childrenMenus,theme:_ctx.getMenuTheme,mixSider:"",onMenuClick:_ctx.handleMenuClick},null,8,["items","theme","onMenuClick"])])),_:1},8,["class"]),withDirectives(createBaseVNode("div",{class:normalizeClass(`${_ctx.prefixCls}-drag-bar`),ref:"dragBarRef"},null,2),[[vShow,_ctx.getShowDragBar&&_ctx.openMenu]])],6)],16)),[[_directive_click_outside,_ctx.handleClickOutside]])],64)}]])},setup(){const{prefixCls:prefixCls}=useDesign("layout-sider-wrapper"),{getIsMobile:getIsMobile}=useAppInject(),{setMenuSetting:setMenuSetting,getCollapsed:getCollapsed,getMenuWidth:getMenuWidth,getIsMixSidebar:getIsMixSidebar}=useMenuSetting();return{prefixCls:prefixCls,getIsMobile:getIsMobile,getCollapsed:getCollapsed,handleClose:function(){setMenuSetting({collapsed:!0})},getMenuWidth:getMenuWidth,getIsMixSidebar:getIsMixSidebar}}}),[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_Sider=resolveComponent("Sider"),_component_Drawer=resolveComponent("Drawer"),_component_MixSider=resolveComponent("MixSider");return _ctx.getIsMobile?(openBlock(),createBlock(_component_Drawer,{key:0,placement:"left",class:normalizeClass(_ctx.prefixCls),width:_ctx.getMenuWidth,getContainer:null,visible:!_ctx.getCollapsed,onClose:_ctx.handleClose},{default:withCtx((()=>[createVNode(_component_Sider)])),_:1},8,["class","width","visible","onClose"])):_ctx.getIsMixSidebar?(openBlock(),createBlock(_component_MixSider,{key:1})):(openBlock(),createBlock(_component_Sider,{key:2}))}]]);var MenuEventEnum=(MenuEventEnum2=>(MenuEventEnum2[MenuEventEnum2.REFRESH_PAGE=0]="REFRESH_PAGE",MenuEventEnum2[MenuEventEnum2.CLOSE_CURRENT=1]="CLOSE_CURRENT",MenuEventEnum2[MenuEventEnum2.CLOSE_LEFT=2]="CLOSE_LEFT",MenuEventEnum2[MenuEventEnum2.CLOSE_RIGHT=3]="CLOSE_RIGHT",MenuEventEnum2[MenuEventEnum2.CLOSE_OTHER=4]="CLOSE_OTHER",MenuEventEnum2[MenuEventEnum2.CLOSE_ALL=5]="CLOSE_ALL",MenuEventEnum2[MenuEventEnum2.SCALE=6]="SCALE",MenuEventEnum2))(MenuEventEnum||{});const _sfc_main$5=defineComponent({name:"TabContent",components:{Dropdown:Dropdown,Icon:Icon$1},props:{tabItem:{type:Object,default:null},isExtra:Boolean},setup(props){const{prefixCls:prefixCls}=useDesign("multiple-tabs-content"),{t:t2}=useI18n(),getTitle=computed((()=>{const{tabItem:{meta:meta}={}}=props;return meta&&t2(meta.title)})),getIsTabs=computed((()=>!props.isExtra)),getTrigger=computed((()=>unref(getIsTabs)?["contextmenu"]:["click"])),{getDropMenuList:getDropMenuList,handleMenuEvent:handleMenuEvent,handleContextMenu:handleContextMenu}=function(tabContentProps,getIsTabs){const state=reactive({current:null,currentIndex:0}),{t:t2}=useI18n(),tabStore=useMultipleTabStore(),{currentRoute:currentRoute}=useRouter(),{refreshPage:refreshPage,closeAll:closeAll,close:close,closeLeft:closeLeft,closeOther:closeOther,closeRight:closeRight}=useTabs(),getTargetTab=computed((()=>unref(getIsTabs)?tabContentProps.tabItem:unref(currentRoute)));return{getDropMenuList:computed((()=>{if(!unref(getTargetTab))return;const{meta:meta}=unref(getTargetTab),{path:path}=unref(currentRoute),curItem=state.current,isCurItem=!!curItem&&curItem.path===path,index2=state.currentIndex,refreshDisabled=!isCurItem,closeLeftDisabled=0===index2||!isCurItem,disabled=1===tabStore.getTabList.length,closeRightDisabled=!isCurItem||index2===tabStore.getTabList.length-1&&tabStore.getLastDragEndIndex>=0;return[{icon:"ion:reload-sharp",event:MenuEventEnum.REFRESH_PAGE,text:t2("layout.multipleTab.reload"),disabled:refreshDisabled},{icon:"clarity:close-line",event:MenuEventEnum.CLOSE_CURRENT,text:t2("layout.multipleTab.close"),disabled:!!(null==meta?void 0:meta.affix)||disabled,divider:!0},{icon:"line-md:arrow-close-left",event:MenuEventEnum.CLOSE_LEFT,text:t2("layout.multipleTab.closeLeft"),disabled:closeLeftDisabled,divider:!1},{icon:"line-md:arrow-close-right",event:MenuEventEnum.CLOSE_RIGHT,text:t2("layout.multipleTab.closeRight"),disabled:closeRightDisabled,divider:!0},{icon:"dashicons:align-center",event:MenuEventEnum.CLOSE_OTHER,text:t2("layout.multipleTab.closeOther"),disabled:disabled||!isCurItem},{icon:"clarity:minus-line",event:MenuEventEnum.CLOSE_ALL,text:t2("layout.multipleTab.closeAll"),disabled:disabled}]})),handleMenuEvent:function(menu){const{event:event}=menu;switch(event){case MenuEventEnum.REFRESH_PAGE:refreshPage();break;case MenuEventEnum.CLOSE_CURRENT:close(tabContentProps.tabItem);break;case MenuEventEnum.CLOSE_LEFT:closeLeft();break;case MenuEventEnum.CLOSE_RIGHT:closeRight();break;case MenuEventEnum.CLOSE_OTHER:closeOther();break;case MenuEventEnum.CLOSE_ALL:closeAll()}},handleContextMenu:function(tabItem){return e=>{if(!tabItem)return;null==e||e.preventDefault();const index2=tabStore.getTabList.findIndex((tab=>tab.path===tabItem.path));state.current=tabItem,state.currentIndex=index2}}}}(props,getIsTabs);return{prefixCls:prefixCls,getDropMenuList:getDropMenuList,handleMenuEvent:handleMenuEvent,handleContext:function(e){props.tabItem&&handleContextMenu(props.tabItem)(e)},getTrigger:getTrigger,getIsTabs:getIsTabs,getTitle:getTitle}}}),_hoisted_1={class:"ml-1"};const TabContent=_export_sfc(_sfc_main$5,[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_Icon=resolveComponent("Icon"),_component_Dropdown=resolveComponent("Dropdown");return openBlock(),createBlock(_component_Dropdown,{dropMenuList:_ctx.getDropMenuList,trigger:_ctx.getTrigger,placement:"bottom",overlayClassName:"multiple-tabs__dropdown",onMenuEvent:_ctx.handleMenuEvent},{default:withCtx((()=>[_ctx.getIsTabs?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(`${_ctx.prefixCls}__info`),onContextmenu:_cache[0]||(_cache[0]=(...args)=>_ctx.handleContext&&_ctx.handleContext(...args))},[createBaseVNode("span",_hoisted_1,toDisplayString(_ctx.getTitle),1)],34)):(openBlock(),createElementBlock("span",{key:1,class:normalizeClass(`${_ctx.prefixCls}__extra-quick`),onClick:_cache[1]||(_cache[1]=(...args)=>_ctx.handleContext&&_ctx.handleContext(...args))},[createVNode(_component_Icon,{icon:"ion:chevron-down"})],2))])),_:1},8,["dropMenuList","trigger","onMenuEvent"])}]]);const FoldButton=_export_sfc(defineComponent({name:"FoldButton",components:{Icon:Icon$1},setup(){const{prefixCls:prefixCls}=useDesign("multiple-tabs-content"),{getShowMenu:getShowMenu,setMenuSetting:setMenuSetting}=useMenuSetting(),{getShowHeader:getShowHeader,setHeaderSetting:setHeaderSetting}=useHeaderSetting(),getIsUnFold=computed((()=>!unref(getShowMenu)&&!unref(getShowHeader)));return{prefixCls:prefixCls,getIcon:computed((()=>unref(getIsUnFold)?"codicon:screen-normal":"codicon:screen-full")),handleFold:function(){const isUnFold=unref(getIsUnFold);setMenuSetting({show:isUnFold,hidden:!isUnFold}),setHeaderSetting({show:isUnFold}),triggerWindowResize()}}}}),[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_Icon=resolveComponent("Icon");return openBlock(),createElementBlock("span",{class:normalizeClass(`${_ctx.prefixCls}__extra-fold`),onClick:_cache[0]||(_cache[0]=(...args)=>_ctx.handleFold&&_ctx.handleFold(...args))},[createVNode(_component_Icon,{icon:_ctx.getIcon},null,8,["icon"])],2)}]]),_sfc_main$3=defineComponent({name:"TabRedo",components:{RedoOutlined:RedoOutlined},setup(){const loading=ref(!1),{prefixCls:prefixCls}=useDesign("multiple-tabs-content"),{refreshPage:refreshPage}=useTabs();return{prefixCls:prefixCls,handleRedo:function(){return __async(this,null,(function*(){loading.value=!0,yield refreshPage(),setTimeout((()=>{loading.value=!1}),1200)}))},loading:loading}}});function initAffixTabs(){const affixList=ref([]),tabStore=useMultipleTabStore(),router=useRouter();let isAddAffix=!1;return isAddAffix||(!function(){const affixTabs=function(routes){const tabs=[];return routes&&routes.forEach((route=>{route.meta&&route.meta.affix&&tabs.push(toRaw(route))})),tabs}(router.getRoutes());affixList.value=affixTabs;for(const tab of affixTabs)tabStore.addTab({meta:tab.meta,name:tab.name,path:tab.path})}(),isAddAffix=!0),affixList.value.map((item=>{var _a;return null==(_a=item.meta)?void 0:_a.title})).filter(Boolean)}function useTabsDrag(affixTextList){const tabStore=useMultipleTabStore(),{multiTabsSetting:multiTabsSetting}=setting,{prefixCls:prefixCls}=useDesign("multiple-tabs");nextTick((()=>{var _a;if(!multiTabsSetting.canDrag)return;const el=null==(_a=document.querySelectorAll(`.${prefixCls} .ant-tabs-nav-wrap > div`))?void 0:_a[0],{initSortable:initSortable}=function(el,options){return{initSortable:function(){nextTick((()=>__async(this,null,(function*(){el&&(yield __vitePreload((()=>import("./sortable.esm.js")),[])).default.create(unref(el),__spreadValues({animation:500,delay:400,delayOnTouchOnly:!0},options))}))))}}}(el,{filter:e=>{var _a2;const text=null==(_a2=null==e?void 0:e.target)?void 0:_a2.innerText;return!!text&&affixTextList.includes(text)},onEnd:evt=>{const{oldIndex:oldIndex,newIndex:newIndex}=evt;isNullAndUnDef(oldIndex)||isNullAndUnDef(newIndex)||oldIndex===newIndex||tabStore.sortTabs(oldIndex,newIndex)}});initSortable()}))}const _sfc_main$2=defineComponent({name:"MultipleTabs",components:{TabRedo:_export_sfc(_sfc_main$3,[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_RedoOutlined=resolveComponent("RedoOutlined");return openBlock(),createElementBlock("span",{class:normalizeClass(`${_ctx.prefixCls}__extra-redo`),onClick:_cache[0]||(_cache[0]=(...args)=>_ctx.handleRedo&&_ctx.handleRedo(...args))},[createVNode(_component_RedoOutlined,{spin:_ctx.loading},null,8,["spin"])],2)}]]),FoldButton:FoldButton,Tabs:Tabs,TabPane:Tabs.TabPane,TabContent:TabContent},setup(){const affixTextList=initAffixTabs(),activeKeyRef=ref("");useTabsDrag(affixTextList);const tabStore=useMultipleTabStore(),userStore=useUserStore(),router=useRouter(),{prefixCls:prefixCls}=useDesign("multiple-tabs"),go=useGo(),{getShowQuick:getShowQuick,getShowRedo:getShowRedo,getShowFold:getShowFold}=useMultipleTabSetting(),getTabsState=computed((()=>tabStore.getTabList.filter((item=>{var _a;return!(null==(_a=item.meta)?void 0:_a.hideTab)})))),unClose=computed((()=>1===unref(getTabsState).length)),getWrapClass=computed((()=>[prefixCls,{[`${prefixCls}--hide-close`]:unref(unClose)}]));return listenerRouteChange((route=>{const{name:name}=route;if(name===REDIRECT_NAME||!route||!userStore.getToken)return;const{path:path,fullPath:fullPath,meta:meta={}}=route,{currentActiveMenu:currentActiveMenu,hideTab:hideTab}=meta,isHide=hideTab?currentActiveMenu:null,p=isHide||fullPath||path;if(activeKeyRef.value!==p&&(activeKeyRef.value=p),isHide){const findParentRoute=router.getRoutes().find((item=>item.path===currentActiveMenu));findParentRoute&&tabStore.addTab(findParentRoute)}else tabStore.addTab(unref(route))})),{getWrapClass:getWrapClass,handleEdit:function(targetKey){unref(unClose)||tabStore.closeTabByKey(targetKey,router)},handleChange:function(activeKey){activeKeyRef.value=activeKey,go(activeKey,!1)},activeKeyRef:activeKeyRef,getTabsState:getTabsState,getShowQuick:getShowQuick,getShowRedo:getShowRedo,getShowFold:getShowFold}}});const LayoutMultipleHeader=_export_sfc(defineComponent({name:"LayoutMultipleHeader",components:{LayoutHeader:LayoutHeader,MultipleTabs:_export_sfc(_sfc_main$2,[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_TabContent=resolveComponent("TabContent"),_component_TabPane=resolveComponent("TabPane"),_component_TabRedo=resolveComponent("TabRedo"),_component_FoldButton=resolveComponent("FoldButton"),_component_Tabs=resolveComponent("Tabs");return openBlock(),createElementBlock("div",{class:normalizeClass(_ctx.getWrapClass)},[createVNode(_component_Tabs,{type:"editable-card",size:"small",animated:!1,hideAdd:!0,tabBarGutter:3,activeKey:_ctx.activeKeyRef,onChange:_ctx.handleChange,onEdit:_ctx.handleEdit},createSlots({default:withCtx((()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(_ctx.getTabsState,(item=>(openBlock(),createBlock(_component_TabPane,{key:item.query?item.fullPath:item.path,closable:!(item&&item.meta&&item.meta.affix)},{tab:withCtx((()=>[createVNode(_component_TabContent,{tabItem:item},null,8,["tabItem"])])),_:2},1032,["closable"])))),128))])),_:2},[_ctx.getShowRedo||_ctx.getShowQuick?{name:"rightExtra",fn:withCtx((()=>[_ctx.getShowRedo?(openBlock(),createBlock(_component_TabRedo,{key:0})):createCommentVNode("",!0),_ctx.getShowQuick?(openBlock(),createBlock(_component_TabContent,{key:1,isExtra:"",tabItem:_ctx.$route},null,8,["tabItem"])):createCommentVNode("",!0),_ctx.getShowFold?(openBlock(),createBlock(_component_FoldButton,{key:2})):createCommentVNode("",!0)])),key:"0"}:void 0]),1032,["activeKey","onChange","onEdit"])],2)}]])},setup(){const{setHeaderHeight:setHeaderHeight}=useLayoutHeight(),{prefixCls:prefixCls}=useDesign("layout-multiple-header"),{getCalcContentWidth:getCalcContentWidth,getSplit:getSplit}=useMenuSetting(),{getIsMobile:getIsMobile}=useAppInject(),{getFixed:getFixed,getShowInsetHeaderRef:getShowInsetHeaderRef,getShowFullHeaderRef:getShowFullHeaderRef,getHeaderTheme:getHeaderTheme,getShowHeader:getShowHeader}=useHeaderSetting(),{getFullContent:getFullContent}=useFullContent(),{getShowMultipleTab:getShowMultipleTab}=useMultipleTabSetting(),getShowTabs=computed((()=>unref(getShowMultipleTab)&&!unref(getFullContent))),getIsShowPlaceholderDom=computed((()=>unref(getFixed)||unref(getShowFullHeaderRef))),getWrapStyle=computed((()=>{const style={};return unref(getFixed)&&(style.width=unref(getIsMobile)?"100%":unref(getCalcContentWidth)),unref(getShowFullHeaderRef)&&(style.top="48px"),style})),getIsFixed=computed((()=>unref(getFixed)||unref(getShowFullHeaderRef))),getPlaceholderDomStyle=computed((()=>{let height=0;return!unref(getShowFullHeaderRef)&&unref(getSplit)||!unref(getShowHeader)||unref(getFullContent)||(height+=48),unref(getShowMultipleTab)&&!unref(getFullContent)&&(height+=32),setHeaderHeight(height),{height:`${height}px`}}));return{getClass:computed((()=>[prefixCls,`${prefixCls}--${unref(getHeaderTheme)}`,{[`${prefixCls}--fixed`]:unref(getIsFixed)}])),prefixCls:prefixCls,getPlaceholderDomStyle:getPlaceholderDomStyle,getIsFixed:getIsFixed,getWrapStyle:getWrapStyle,getIsShowPlaceholderDom:getIsShowPlaceholderDom,getShowTabs:getShowTabs,getShowInsetHeaderRef:getShowInsetHeaderRef}}}),[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_LayoutHeader=resolveComponent("LayoutHeader"),_component_MultipleTabs=resolveComponent("MultipleTabs");return openBlock(),createElementBlock(Fragment,null,[_ctx.getIsShowPlaceholderDom?(openBlock(),createElementBlock("div",{key:0,style:normalizeStyle(_ctx.getPlaceholderDomStyle)},null,4)):createCommentVNode("",!0),createBaseVNode("div",{style:normalizeStyle(_ctx.getWrapStyle),class:normalizeClass(_ctx.getClass)},[_ctx.getShowInsetHeaderRef?(openBlock(),createBlock(_component_LayoutHeader,{key:0})):createCommentVNode("",!0),_ctx.getShowTabs?(openBlock(),createBlock(_component_MultipleTabs,{key:1})):createCommentVNode("",!0)],6)],64)}],["__scopeId","data-v-da76d36d"]]);function useLockPage(){const{getLockTime:getLockTime}=useRootSetting(),lockStore=useLockStore(),userStore=useUserStore(),appStore=useAppStore();let timeId;function clear(){window.clearTimeout(timeId)}function resetCalcLockTimeout(){if(!userStore.getToken)return void clear();const lockTime=appStore.getProjectConfig.lockTime;!lockTime||lockTime<1?clear():(clear(),timeId=setTimeout((()=>{lockStore.setLockInfo({isLock:!0,pwd:void 0})}),60*lockTime*1e3))}watchEffect((onClean=>{userStore.getToken?resetCalcLockTimeout():clear(),onClean((()=>{clear()}))})),onUnmounted((()=>{clear()}));const keyupFn=useThrottleFn(resetCalcLockTimeout,2e3);return computed((()=>unref(getLockTime)?{onKeyup:keyupFn,onMousemove:keyupFn}:(clear(),{})))}const index=_export_sfc(defineComponent({name:"DefaultLayout",components:{LayoutFeatures:createAsyncComponent((()=>__vitePreload((()=>import("./index27.js")),__vite__mapDeps([33,1,2,34,35,36,10,37,38,39,40,41,42,43,44,45,46,47,48,49,50,11,12,7,13,6,14,15,16,17,18,19,20,51])))),LayoutFooter:createAsyncComponent((()=>__vitePreload((()=>import("./index28.js")),__vite__mapDeps([52,1,2,4,14,6,53,54])))),LayoutHeader:LayoutHeader,LayoutContent:LayoutContent,LayoutSideBar:LayoutSideBar,LayoutMultipleHeader:LayoutMultipleHeader,Layout:Layout},setup(){const{prefixCls:prefixCls}=useDesign("default-layout"),{getIsMobile:getIsMobile}=useAppInject(),{getShowFullHeaderRef:getShowFullHeaderRef}=useHeaderSetting(),{getShowSidebar:getShowSidebar,getIsMixSidebar:getIsMixSidebar,getShowMenu:getShowMenu}=useMenuSetting(),lockEvents=useLockPage(),layoutClass=computed((()=>{let cls=["ant-layout"];return(unref(getIsMixSidebar)||unref(getShowMenu))&&cls.push("ant-layout-has-sider"),cls}));return{getShowFullHeaderRef:getShowFullHeaderRef,getShowSidebar:getShowSidebar,prefixCls:prefixCls,getIsMobile:getIsMobile,getIsMixSidebar:getIsMixSidebar,layoutClass:layoutClass,lockEvents:lockEvents}}}),[["render",function(_ctx,_cache,$props,$setup,$data,$options){const _component_LayoutFeatures=resolveComponent("LayoutFeatures"),_component_LayoutHeader=resolveComponent("LayoutHeader"),_component_LayoutSideBar=resolveComponent("LayoutSideBar"),_component_LayoutMultipleHeader=resolveComponent("LayoutMultipleHeader"),_component_LayoutContent=resolveComponent("LayoutContent"),_component_LayoutFooter=resolveComponent("LayoutFooter"),_component_Layout=resolveComponent("Layout");return openBlock(),createBlock(_component_Layout,mergeProps({class:_ctx.prefixCls},_ctx.lockEvents),{default:withCtx((()=>[createVNode(_component_LayoutFeatures),_ctx.getShowFullHeaderRef?(openBlock(),createBlock(_component_LayoutHeader,{key:0,fixed:""})):createCommentVNode("",!0),createVNode(_component_Layout,{class:normalizeClass([_ctx.layoutClass])},{default:withCtx((()=>[_ctx.getShowSidebar||_ctx.getIsMobile?(openBlock(),createBlock(_component_LayoutSideBar,{key:0})):createCommentVNode("",!0),createVNode(_component_Layout,{class:normalizeClass(`${_ctx.prefixCls}-main`)},{default:withCtx((()=>[createVNode(_component_LayoutMultipleHeader),createVNode(_component_LayoutContent),createVNode(_component_LayoutFooter)])),_:1},8,["class"])])),_:1},8,["class"])])),_:1},16,["class"])}]]),index$1=Object.freeze(Object.defineProperty({__proto__:null,default:index},Symbol.toStringTag,{value:"Module"}));export{useMultipleTabSetting as a,index$1 as i,useHeaderSetting as u};
