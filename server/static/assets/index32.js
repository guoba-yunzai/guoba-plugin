import{d as defineComponent,bP as useConfigInject,bZ as getPropsSlot,ct as _objectWithoutProperties,j as createVNode,_ as _objectSpread2,c1 as PropTypes,db as DownOutlined,dc as Dropdown,bW as flattenChildren,bO as warning,bS as _typeof,cT as cloneVNode,bQ as _defineProperty,ab as Menu,ce as _toConsumableArray}from"./index.js";var _excluded$1=["class","style"];const BreadcrumbItem=defineComponent({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:{prefixCls:String,href:String,separator:PropTypes.any,overlay:PropTypes.any,onClick:Function},slots:["separator","overlay"],setup:function(props,_ref){var slots=_ref.slots,attrs=_ref.attrs,prefixCls=useConfigInject("breadcrumb",props).prefixCls;return function(){var _getPropsSlot,link,breadcrumbItem,prefixCls2,overlay,separator=null!==(_getPropsSlot=getPropsSlot(slots,props,"separator"))&&void 0!==_getPropsSlot?_getPropsSlot:"/",children=getPropsSlot(slots,props),cls=attrs.class,style=attrs.style,restAttrs=_objectWithoutProperties(attrs,_excluded$1);return link=void 0!==props.href?createVNode("a",_objectSpread2({class:"".concat(prefixCls.value,"-link"),onClick:props.onClick},restAttrs),[children]):createVNode("span",_objectSpread2({class:"".concat(prefixCls.value,"-link"),onClick:props.onClick},restAttrs),[children]),breadcrumbItem=link,prefixCls2=prefixCls.value,link=(overlay=getPropsSlot(slots,props,"overlay"))?createVNode(Dropdown,{overlay:overlay,placement:"bottom"},{default:function(){return[createVNode("span",{class:"".concat(prefixCls2,"-overlay-link")},[breadcrumbItem,createVNode(DownOutlined,null,null)])]}}):breadcrumbItem,children?createVNode("span",{class:cls,style:style},[link,separator&&createVNode("span",{class:"".concat(prefixCls.value,"-separator")},[separator])]):null}}});function defaultItemRender(opt){var route=opt.route,params=opt.params,routes=opt.routes,paths=opt.paths,isLastItem=routes.indexOf(route)===routes.length-1,name=function(route,params){if(!route.breadcrumbName)return null;var paramsKeys=Object.keys(params).join("|");return route.breadcrumbName.replace(new RegExp(":(".concat(paramsKeys,")"),"g"),(function(replacement,key){return params[key]||replacement}))}(route,params);return isLastItem?createVNode("span",null,[name]):createVNode("a",{href:"#/".concat(paths.join("/"))},[name])}const Breadcrumb=defineComponent({compatConfig:{MODE:3},name:"ABreadcrumb",props:{prefixCls:String,routes:{type:Array},params:PropTypes.any,separator:PropTypes.any,itemRender:{type:Function}},slots:["separator","itemRender"],setup:function(props,_ref){var slots=_ref.slots,_useConfigInject=useConfigInject("breadcrumb",props),prefixCls=_useConfigInject.prefixCls,direction=_useConfigInject.direction,getPath=function(path,params){return path=(path||"").replace(/^\//,""),Object.keys(params).forEach((function(key){path=path.replace(":".concat(key),params[key])})),path},addChildPath=function(paths,childPath,params){var originalPaths=_toConsumableArray(paths),path=getPath(childPath||"",params);return path&&originalPaths.push(path),originalPaths};return function(){var _getPropsSlot,_breadcrumbClassName,crumbs,routes=props.routes,_props$params=props.params,params=void 0===_props$params?{}:_props$params,children=flattenChildren(getPropsSlot(slots,props)),separator=null!==(_getPropsSlot=getPropsSlot(slots,props,"separator"))&&void 0!==_getPropsSlot?_getPropsSlot:"/",itemRender=props.itemRender||slots.itemRender||defaultItemRender;routes&&routes.length>0?crumbs=function(_ref2){var _ref2$routes=_ref2.routes,routes=void 0===_ref2$routes?[]:_ref2$routes,_ref2$params=_ref2.params,params=void 0===_ref2$params?{}:_ref2$params,separator=_ref2.separator,_ref2$itemRender=_ref2.itemRender,itemRender=void 0===_ref2$itemRender?defaultItemRender:_ref2$itemRender,paths=[];return routes.map((function(route){var path=getPath(route.path,params);path&&paths.push(path);var tempPaths=[].concat(paths),overlay=null;return route.children&&route.children.length&&(overlay=createVNode(Menu,null,{default:function(){return[route.children.map((function(child){return createVNode(Menu.Item,{key:child.path||child.breadcrumbName},{default:function(){return[itemRender({route:child,params:params,routes:routes,paths:addChildPath(tempPaths,child.path,params)})]}})}))]}})),createVNode(BreadcrumbItem,{overlay:overlay,separator:separator,key:path||route.breadcrumbName},{default:function(){return[itemRender({route:route,params:params,routes:routes,paths:tempPaths})]}})}))}({routes:routes,params:params,separator:separator,itemRender:itemRender}):children.length&&(crumbs=children.map((function(element,index){return warning("object"===_typeof(element.type)&&(element.type.__ANT_BREADCRUMB_ITEM||element.type.__ANT_BREADCRUMB_SEPARATOR),"Breadcrumb","Only accepts Breadcrumb.Item and Breadcrumb.Separator as it's children"),cloneVNode(element,{separator:separator,key:index})})));var breadcrumbClassName=(_defineProperty(_breadcrumbClassName={},prefixCls.value,!0),_defineProperty(_breadcrumbClassName,"".concat(prefixCls.value,"-rtl"),"rtl"===direction.value),_breadcrumbClassName);return createVNode("div",{class:breadcrumbClassName},[crumbs])}}});var _excluded=["separator","class"];const BreadcrumbSeparator=defineComponent({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:{prefixCls:String},setup:function(props,_ref){var slots=_ref.slots,attrs=_ref.attrs,prefixCls=useConfigInject("breadcrumb",props).prefixCls;return function(){var _slots$default;attrs.separator;var className=attrs.class,restAttrs=_objectWithoutProperties(attrs,_excluded),children=flattenChildren(null===(_slots$default=slots.default)||void 0===_slots$default?void 0:_slots$default.call(slots));return createVNode("span",_objectSpread2({class:["".concat(prefixCls.value,"-separator"),className]},restAttrs),[children.length>0?children:"/"])}}});Breadcrumb.Item=BreadcrumbItem,Breadcrumb.Separator=BreadcrumbSeparator,Breadcrumb.install=function(app){return app.component(Breadcrumb.name,Breadcrumb),app.component(BreadcrumbItem.name,BreadcrumbItem),app.component(BreadcrumbSeparator.name,BreadcrumbSeparator),app};export{Breadcrumb as B};
